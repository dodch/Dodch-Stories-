:root{
  /* Light mode variables (default) */
  --heart-color:rgba(255,255,255,0.8);
  --heart-active:#fb4268;
  --bg-url:url("https://i.ibb.co/xt2tbzQW/IMG-2367.jpg");
  --bg-url-dark:url("https://i.ibb.co/5gBLTYpm/IMG-2195.jpg");
  --main-bg:rgba(0,0,0,0);
  --moon-color:#fff;
  --notification-text:#fff;
  --search-placeholder:rgba(255,255,255,0.5);
  --tint-color:#fff;
  --blue-tint:#00aaff;
  --purple-tint:#a366ff;
  --red-tint:#ff3366;
  --golden-tint:gold;
  --glass-bg:color-mix(in srgb,var(--tint-color) 10%,transparent);
  --glass-text:#fff;
  --glass-shadow:inset 0 0 0 1px color-mix(in srgb,#fff 10%,transparent),
                  inset 1.8px 3px 0px -2px color-mix(in srgb,#fff 90%,transparent),
                  inset -2px -2px 0px -2px color-mix(in srgb,#fff 80%,transparent),
                  inset -3px -8px 1px -6px color-mix(in srgb,#fff 60%,transparent),
                  inset -0.3px -1px 4px 0px color-mix(in srgb,#000 12%,transparent),
                  inset -1.5px 2.5px 0px -2px color-mix(in srgb,#000 20%,transparent),
                  inset 0px 3px 4px -2px color-mix(in srgb,#000 20%,transparent),
                  inset 2px -6.5px 1px -4px color-mix(in srgb,#000 10%,transparent),
                  0px 2px 10px 0px color-mix(in srgb,#000 20%,transparent),
                  0px 10px 30px 0px color-mix(in srgb,#000 15%,transparent);
  --button-shadow:var(--glass-shadow);
  transition: all 0.5s ease-in-out;
  --panel-blur-start: 10px;
  
  /* NEW: Viewport variable for the mobile fix (using largest for fixed elements) */
  --vph: 100lvh;
  --blur-radius: 3px;

}
/* Dark mode variables based on device settings or manual override */
@media (prefers-color-scheme: dark) {
  :root {
    --main-bg: rgba(0,0,0,0.7);
    --moon-color:#fce38a;
    --notification-text:#f0f0f0;
    --search-placeholder:rgba(255,255,255,0.8);
    --tint-color:#888;
    --blue-tint:#00aaff;
    --purple-tint:#a366ff;
    --red-tint:#ff3366;
    --golden-tint:gold;
    --glass-bg:rgba(0,0,0,0.35);
    --glass-text:#f0f0f0;
    --glass-shadow:inset 0 0 0 1px color-mix(in srgb,#fff 10%,transparent),
                    inset 1.8px 3px 0px -2px color-mix(in srgb,#fff 90%,transparent),
                    inset -2px -2px 0px -2px color-mix(in srgb,#fff 80%,transparent),
                    inset -3px -8px 1px -6px color-mix(in srgb,#fff 60%,transparent),
                    inset -0.3px -1px 4px 0px color-mix(in srgb,#000 12%,transparent),
                    inset -1.5px 2.5px 0px -2px color-mix(in srgb,#000 20%,transparent),
                    inset 0px 3px 4px -2px color-mix(in srgb,#000 20%,transparent),
                    inset 2px -6.5px 1px -4px color-mix(in srgb,#000 10%,transparent),
                    0px 2px 10px 0px color-mix(in srgb,rgba(0,0,0,0.5),transparent),
                    0px 10px 30px 0px color-mix(in srgb,rgba(0,0,0,0.4),transparent);
    --button-shadow:var(--glass-shadow);
  }
}
/* This class can be used for a manual toggle button if you add one later */
body.dark-mode {
  --main-bg: rgba(0,0,0,0.7);
  --moon-color:#fce38a;
  --notification-text:#f0f0f0;
  --search-placeholder:rgba(255,255,255,0.8);
  --tint-color:#888;
  --blue-tint:#00aaff;
  --purple-tint:#a366ff;
  --red-tint:#ff3366;
  --golden-tint:gold;
  --glass-bg:rgba(0,0,0,0.35);
  --glass-text:#f0f0f0;
  --glass-shadow:inset 0 0 0 1px color-mix(in srgb,#fff 10%,transparent),
                  inset 1.8px 3px 0px -2px color-mix(in srgb,#fff 90%,transparent),
                  inset -2px -2px 0px -2px color-mix(in srgb,#fff 80%,transparent),
                  inset -3px -8px 1px -6px color-mix(in srgb,#fff 60%,transparent),
                  inset -0.3px -1px 4px 0px color-mix(in srgb,#000 12%,transparent),
                  inset -1.5px 2.5px 0px -2px color-mix(in srgb,#000 20%,transparent),
                  inset 0px 3px 4px -2px color-mix(in srgb,#000 20%,transparent),
                  inset 2px -6.5px 1px -4px color-mix(in srgb,#000 10%,transparent),
                  0px 2px 10px 0px color-mix(in srgb,rgba(0,0,0,0.5),transparent),
                  0px 10px 30px 0px color-mix(in srgb,rgba(0,0,0,0.4),transparent);
  --button-shadow:var(--glass-shadow);
}
html {
  height: 100%;
  scroll-behavior: smooth;
}
body {
  margin:0;
  color:#fff;
  font-family:sans-serif;
  padding:40px;
  background-color:#2e3b55;
  position: relative;
  overflow-x: hidden;
  transition: all 0.5s ease-in-out;
  /* FIX: Use 100dvh for stable mobile layout height (Dynamic Viewport Height) */
  min-height: 100dvh; 
}
body::before {
  content: '';
  /* Fixed position for background */
  position: fixed; 
  top: 0;
  left: 0;
  width: 100vw;
  /* FIX: Use 100lvh for stable mobile background height (Largest Viewport Height) */
  height: 100lvh; 
  background-image: var(--bg-url);
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  z-index: -1;
  transition: background-image 1s ease-in-out, background-color 1s ease-in-out;
}
/* Applies the dark background for the manual button toggle */
body.dark-mode::before {
  background-image: var(--bg-url-dark);
}
/* Applies the dark background for device preference */
@media (prefers-color-scheme: dark) {
  body::before {
    background-image: var(--bg-url-dark);
  }
}
h1{margin:0 0 20px;}
.grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  grid-auto-rows: minmax(min-content, auto);
  gap:20px;
  margin-top: 100px;
  transition: all 0.5s ease-in-out;
}
.glass-container {
  background:var(--glass-bg);
  border-radius:3rem;
  padding:20px;
  box-shadow:var(--glass-shadow);
  /* OPTIMIZATION: Force layer promotion to the GPU for smoother animations. */
  transform: translateZ(0);
  will-change: transform, opacity;
  transition: box-shadow 0.2s, background 0.5s ease-in-out, backdrop-filter 0.4s ease-out, -webkit-backdrop-filter 0.4s ease-out, opacity 0.5s ease-out;
  cursor:pointer;
  text-decoration: none;
  color: var(--glass-text);
  position: relative;
  /* PERFORMANCE TRICK: Tell the browser this is a self-contained component */
  contain: layout style paint;

  /* --- Backdrop Filter Fallback --- */
  /* Apply the simple blur universally. This will work on iOS Safari. */
  -webkit-backdrop-filter: blur(var(--blur-radius));
  backdrop-filter: blur(var(--blur-radius));
}

/* If JS detects SVG filter support, enhance the blur. This will NOT run on iOS. */
body.svg-filter-supported .glass-container {
  -webkit-backdrop-filter: blur(var(--blur-radius)) url(#filter-hq);
  backdrop-filter: blur(var(--blur-radius)) url(#filter-hq);
}

.glass-container:hover {
  box-shadow:0 20px 50px rgba(0,0,0,0.7), inset 0 0 0 1px rgba(255, 255, 255, 0.1), var(--glass-shadow);
}
.glass-container.favorited{
  background-color:color-mix(in srgb,var(--heart-active) 25%,transparent)
}
.glass-content {
  text-align: left;
  padding: 3rem 2rem 3rem 2rem; 
  position: relative;
}
.title {
  /* FIX: Use a dominant serif font and a stronger, layered shadow for maximum clarity. */
  font-size: 2rem;
  font-weight: 900;
  margin-bottom: .5rem;
  font-family: 'Playfair Display', serif;
  text-shadow: 0 2px 3px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5);
  /* NEW: Add transition for hover animation */
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  /* FIX: Revert to left alignment for titles */
  text-align: left;
}
.description {
  font-size: 1rem;
  opacity: .8;
  font-family: 'Open Sans', sans-serif;
  /* FIX: Add a stronger, layered shadow to lift text from the background. */
  text-shadow: 0 1px 2px rgba(0,0,0,0.9), 0 0 5px rgba(0,0,0,0.5);
  /* NEW: Add transition for hover animation */
  transition: all 0.3s ease-out;
}

/* --- NEW: Premium Text Hover Effect --- */
.glass-container:hover .title {
  color: var(--golden-tint);
  text-shadow: 0 0 10px color-mix(in srgb, var(--golden-tint) 70%, transparent), 0 2px 3px rgba(0,0,0,0.8);
  transform: translateY(-2px) scale(1.02);
}
.glass-container:hover .description {
  opacity: 1;
  color: var(--glass-text);
  transform: translateY(-1px);
}
/* Fixed wrapper for the top-right elements */
.top-right-fixed-wrapper {
    position: fixed;
    top: 0;
    right: 0;
    width: auto;
    height: auto;
    padding: 40px; /* Match body padding */
    z-index: 10;
    will-change: transform; 
    transform: translateZ(0);
    display: flex; 
    justify-content: flex-end; 
    align-items: center;
}
.search-container-wrapper {
  position: relative; 
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  gap: 1rem;
  transform: none; 
  padding: 0;
}
.search-bar {
  width:0;
  height:60px;
  border:none;
  border-radius:30px;
  padding:0;
  color:var(--glass-text);
  font-size:1rem;
  opacity:0;
  visibility:hidden;
  margin-right:0px;
  background-color:color-mix(in srgb,var(--blue-tint) 20%,transparent);
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
  box-shadow:var(--glass-shadow);
  transition: width 0.5s ease-in-out, padding 0.5s ease-in-out, opacity 0.5s ease-in-out, background-color 0.5s ease-in-out;
  position: absolute;
  /* FIX: Anchor the search bar to the right, next to the button. */
  right: 70px; /* button width (60px) + gap (10px) */
  z-index: 1; /* Ensure it's on top */
}
.search-bar:focus{outline:none}
.search-bar::placeholder{color:var(--search-placeholder);}
.search-bar.active{
  width:250px;
  padding: 0 20px; /* Reset padding to normal */
  opacity:1;
  visibility:visible;
}
.search-button{
  position: relative;
  width:60px;
  height:60px;
  border-radius:30px;
  box-shadow:var(--button-shadow);
  cursor: pointer;
  background-color:color-mix(in srgb,var(--blue-tint) 20%,transparent);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: box-shadow 0.5s ease-in-out, background-color 0.5s ease-in-out;
  transition: all 0.3s ease-in-out;
  z-index: 2; /* Ensure button is on top */
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
}
.search-button:hover, .search-button:focus-visible {
  transform: scale(1.05);
  box-shadow: 0 0 15px color-mix(in srgb, var(--blue-tint) 50%, transparent), var(--button-shadow);
}
.search-button.active {
  background-color: var(--red-tint);
}
.search-button.active:hover, .search-button.active:focus-visible {
  /* FIX: Add a red glow on hover when the button is active (showing the 'X'). */
  box-shadow: 0 0 15px color-mix(in srgb, var(--red-tint) 50%, transparent), var(--button-shadow);
}
.search-button svg.search-icon {
  transform: rotate(0deg) scale(1);
}
.search-button.active svg.search-icon {
  transform: rotate(45deg) scale(0);
}
.search-button svg.close-icon {
  position: absolute;
  transform: rotate(-45deg) scale(0);
}
.search-button.active svg.close-icon {
  transform: rotate(0deg) scale(1);
}
.search-button svg{
  width:30px;
  height:30px;
  fill: none;
  stroke: var(--glass-text);
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
  transition: transform 0.5s ease-in-out, stroke 0.5s ease-in-out;
}
.highlight {
  color: var(--blue-tint);
  text-shadow:0 0 10px var(--blue-tint),0 0 20px var(--blue-tint);
}
/* --- Buttons from the second code --- */
.favorite-btn{
  position:absolute;
  top:1rem;
  right:1rem;
  width:40px;
  height:40px;
  border-radius:50%;
  opacity:1;
  transform:scale(1);
  background-color: color-mix(in srgb,var(--red-tint) 20%,transparent);
  box-shadow: var(--button-shadow);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out;
  transition: all 0.3s ease-in-out;
}
.favorite-btn:hover, .favorite-btn:focus-visible {
  transform: scale(1.1);
  box-shadow: 0 0 15px color-mix(in srgb, var(--red-tint) 50%, transparent), var(--button-shadow);
}
.favorite-btn svg{
  position:relative;
  z-index:2;
  width:20px;
  height:20px;
  fill:var(--heart-color);
  transform:translateY(1px);
  transition:fill 0.5s ease-in-out;
  stroke:black;
  stroke-width:1.5px;
}
.favorite-btn.active svg{
  fill:var(--heart-active);
}
.floating-buttons-container{
  position:fixed;
  bottom:2rem;
  left:2rem;
  display:flex;
  gap:1rem;
  z-index:10;
}
.floating-button{
  width:60px;
  height:60px;
  border-radius:50%;
  box-shadow:var(--button-shadow);
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  background-color: color-mix(in srgb,var(--purple-tint) 40%,transparent);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  transition: background-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out;
  transition: all 0.3s ease-in-out;
  transform-origin: center;
}
.floating-button:hover, .floating-button:focus-visible {
  transform: scale(1.05);
  box-shadow: 0 0 20px color-mix(in srgb, var(--purple-tint) 50%, transparent), var(--button-shadow);
}
#filterBtn.floating-button {
    background-color: color-mix(in srgb,var(--red-tint) 20%,transparent);
}
#filterBtn.floating-button:hover, #filterBtn.floating-button:focus-visible {
    box-shadow: 0 0 20px color-mix(in srgb, var(--red-tint) 50%, transparent), var(--button-shadow);
}
#contactBtn.floating-button {
    background-color: color-mix(in srgb,var(--blue-tint) 20%,transparent);
}
#contactBtn.floating-button:hover, #contactBtn.floating-button:focus-visible {
    box-shadow: 0 0 20px color-mix(in srgb, var(--blue-tint) 50%, transparent), var(--button-shadow);
}
.floating-button svg{
  width:30px;
  height:30px;
  fill:var(--glass-text);
  transition:fill 0.5s ease-in-out;
  stroke:black;
  stroke-width:1.5px;
}
#no-favorites-message{
  color:var(--glass-text);
  font-size:1.5rem;
  opacity:0;
  text-align:center;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-40%);
  pointer-events:none;
  width:100%;
  z-index:5;
}
#no-favorites-message.show{
  opacity:1;
  transform:translate(-50%,-50%);
}
.loading{
  position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999;
  display:flex;justify-content:center;align-items:center;opacity:1;transition:opacity 1s ease-in-out;
  pointer-events:all;
}
.loading.hidden{
  opacity:0;pointer-events:none;
}
.loading-text{
  text-align:center;width:100%;line-height:100px;
}
.loading-text span{
  display:inline-block;margin:0 5px;color:#fff;font-family:'Quattrocento Sans',sans-serif;
  font-size:2rem;filter:blur(0);animation:blur-text 1.5s infinite linear alternate;
}
.loading-text span:nth-child(1){animation-delay:0s}
.loading-text span:nth-child(2){animation-delay:.2s}
.loading-text span:nth-child(3){animation-delay:.4s}
.loading-text span:nth-child(4){animation-delay:.6s}
.loading-text span:nth-child(5){animation-delay:.8s}
@keyframes blur-text{0%{filter:blur(0)}100%{filter:blur(4px)}}
.notifications-container{
  position:fixed;top:3.5rem;right:100px;display:flex;align-items:center;overflow:hidden;
  white-space:nowrap;z-index:5;height:60px;width:calc(100% - 100px);pointer-events:none;
}
.notifications-container .notification-item{
  color:var(--notification-text);font-size:1.25rem;font-weight:bold;
  animation:slide-left 15s linear infinite;display:inline-block;animation-delay:-5s;
}
@keyframes slide-left{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}
.panel-hidden{
  pointer-events:none;height:auto;padding:0;margin:0;border:none;min-height:0;
  overflow:visible;opacity:0;transform:scale(0.9) translateY(20px);display:none;
}
.scroll-fix{
  height:1px;
  margin-top:50px;
}
/* --- Media Query for smaller screens --- */
@media (max-width: 600px) {
  .top-right-fixed-wrapper {
    padding: 20px; /* Adjust padding for mobile */
  }
  .search-bar.active {
    width: 180px;
    padding: 0 15px;
    margin-right: 0.5rem;
  }
  body {
      padding: 20px;
  }
  .floating-buttons-container{
      left:1rem;
      bottom:1rem;
  }
}
.site-footer {
  text-align: center;
  margin-top: 50px;
  color: var(--glass-text);
  opacity: 0.7;
  font-size: 0.9rem;
  transition: color 0.5s ease-in-out;
}
.made-by-who {
  font-family: 'Quattrocento Sans', sans-serif;
  font-size: 1.2rem;
  color: var(--golden-tint);
  margin-top: 10px;
}
/* --- Jello Animation CSS --- */
.squash {
  transform: scale(0.85, 0.9);
}
@keyframes jello-wobble {
  0%   { transform: scale(1,1); }
  25%  { transform: scale(0.9, 1.15) rotate(-1deg); }
  50%  { transform: scale(1.1, 0.9) rotate(1deg); }
  75%  { transform: scale(0.95, 1.05) rotate(-0.5deg); }
  100% { transform: scale(1,1) rotate(0); }
}
.jello {
  /* A custom cubic-bezier for a more 'bouncy' and realistic feel */
  animation: jello-wobble 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
/* --- Added CSS for story details and status pills --- */
.story-length {
  position: absolute;
  bottom: 40px;
  left: 20px;
  font-size: 0.8rem;
  opacity: 0.7;
  text-transform: capitalize;
  font-family: 'Open Sans', sans-serif;
  /* FIX: Add a stronger, layered shadow for readability. */
  text-shadow: 0 1px 2px rgba(0,0,0,0.9), 0 0 4px rgba(0,0,0,0.5);
  /* NEW: Add transition for hover animation */
  transition: all 0.3s ease-out;
}
.creation-date {
  position: absolute;
  bottom: 40px;
  right: 20px;
  font-size: 0.8rem;
  opacity: 0.7;
  text-transform: capitalize;
  font-family: 'Open Sans', sans-serif;
  /* FIX: Add a stronger, layered shadow for readability. */
  text-shadow: 0 1px 2px rgba(0,0,0,0.9), 0 0 4px rgba(0,0,0,0.5);
  /* NEW: Add transition for hover animation */
  transition: all 0.3s ease-out;
}
.story-creator {
  position: absolute;
  bottom: 20px;
  font-family: 'Quattrocento Sans', sans-serif;
  /* FIX: Use italic style for a signature feel and add a stronger shadow. */
  font-style: italic;
  font-size: 0.8rem;
  opacity: 0.8;
  color: var(--golden-tint);
  text-transform: capitalize;
  /* FIX: Revert to centered alignment for creator text */
  text-align: center;
  width: 100%;
  left: 0;
  text-shadow: 0 1px 2px rgba(0,0,0,0.9), 0 0 5px rgba(0,0,0,0.7);
  /* NEW: Add transition for hover animation */
  transition: all 0.3s ease-out;
}
.glass-container:hover .story-length,
.glass-container:hover .creation-date,
.glass-container:hover .story-creator {
  opacity: 1;
}
.glass-container.no-link {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
    /* NEW: Add a grayscale filter to visually "grey out" the disabled cards. */
    filter: grayscale(1);
}
/* --- New 'status' pill CSS with glow animations --- */
.new-pill {
    position: absolute;
    top: 1.5rem;
    left: 1.5rem;
    color: white;
    font-size: 0.75rem;
    font-weight: bold;
    padding: 4px 8px;
    border-radius: 12px;
    z-index: 10;
    transform-origin: center;
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
}
.new-pill.red {
    background-color: var(--red-tint);
    animation: glow-red 1.5s infinite alternate ease-in-out;
}
@keyframes glow-red {
    0% { box-shadow: 0 0 5px var(--red-tint), 0 0 10px var(--red-tint), 0 0 15px var(--red-tint); transform: scale(1); }
    100% { box-shadow: 0 0 10px var(--red-tint), 0 0 20px var(--red-tint), 0 0 30px var(--red-tint); transform: scale(1.05); }
}
.new-pill.purple {
    background-color: var(--purple-tint);
    animation: glow-purple 1.5s infinite alternate ease-in-out;
}
@keyframes glow-purple {
    0% { box-shadow: 0 0 5px var(--purple-tint), 0 0 10px var(--purple-tint), 0 0 15px var(--purple-tint); transform: scale(1); }
    100% { box-shadow: 0 0 10px var(--purple-tint), 0 0 20px var(--purple-tint), 0 0 30px var(--purple-tint); transform: scale(1.05); }
}
.new-pill.golden {
    background-color: var(--golden-tint);
    color: black;
    animation: glow-golden 1.5s infinite alternate ease-in-out;
}
@keyframes glow-golden {
    0% { box-shadow: 0 0 5px var(--golden-tint), 0 0 10px var(--golden-tint), 0 0 15px var(--golden-tint); transform: scale(1); }
    100% { box-shadow: 0 0 10px var(--golden-tint), 0 0 20px var(--golden-tint), 0 0 30px var(--golden-tint); transform: scale(1.05); }
}
/* --- Info Panel CSS --- */
/* Fixed wrapper for the top-left elements */
.top-left-fixed-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: auto;
  height: auto;
  padding: 40px; /* Match body padding */
  z-index: 20;
  will-change: transform;
  transform: translateZ(0);
  display: flex;
  justify-content: flex-start;
  align-items: center;
}
.info-container-wrapper {
  position: relative; 
  top: 0;
  left: 0;
  z-index: 20;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: opacity 0.5s ease-in-out, visibility 0.5s; 
  transform: none; 
  padding: 0;
}
.info-container-wrapper.hidden {
  opacity: 0;
  pointer-events: none;
  visibility: hidden; 
}
.info-button {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  box-shadow: var(--button-shadow);
  cursor: pointer;
  background-color: color-mix(in srgb, var(--red-tint) 40%, transparent);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: box-shadow 0.5s ease-in-out, background-color 0.5s ease-in-out;
  transition: all 0.3s ease-in-out;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}
.info-button:hover, .info-button:focus-visible {
  transform: scale(1.05);
  box-shadow: 0 0 15px color-mix(in srgb, var(--red-tint) 50%, transparent), var(--button-shadow);
}
.info-button svg {
  width: 20px;
  height: 20px;
  fill: none;
  stroke: var(--glass-text);
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: stroke 0.5s ease-in-out;
}
.info-panel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  /* Keep 100lvh for stable panel height (Largest Viewport Height) */
  height: 100lvh; 
  padding: 80px 40px 40px;
  box-sizing: border-box;
  background-color: var(--glass-bg);
  backdrop-filter: blur(var(--panel-blur-start));
  -webkit-backdrop-filter: blur(var(--panel-blur-start));
  z-index: 100;
  /* FIX: Make the panel itself scrollable */
  overflow-y: auto;
  display: block; /* Change from flex to block */
  text-align: left;
  will-change: transform; /* Promote to its own layer for smooth scrolling */
  transform: scale(0.95);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease-in-out, transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), backdrop-filter 0.5s ease-in-out;
}
.info-panel.active {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.info-content {
    max-width: 600px;
    /* FIX: Center the content block within the scrollable panel */
    margin: 0 auto;
    /* Let content define its own height */
    height: auto;
}
.info-intro {
  font-style: italic;
  opacity: 0.9;
  text-align: center; /* Keep the intro centered */
  margin-bottom: 2rem !important;
}
.info-panel hr {
  border: none;
  height: 1px;
  background-color: color-mix(in srgb, var(--glass-text) 20%, transparent);
  margin: 2rem 0;
}
.info-panel h3 {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--golden-tint);
  margin-bottom: 1rem;
  text-align: left; /* Ensure subheadings are left-aligned */
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
.info-panel h2 {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  text-align: center; /* Keep main titles centered */
  color: var(--glass-text);
  z-index: 100;
}
.info-panel p {
  font-size: 1.1rem;
  line-height: 1.6;
  margin: 0 0 1rem;
  color: var(--glass-text);
  z-index: 100;
}
.info-panel ul {
  /* FIX: Add styling for lists to ensure consistent spacing and appearance. */
  list-style: none;
  padding-left: 1rem;
  margin: 0 0 1rem;
}
.info-panel li {
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 0.75rem;
  color: var(--glass-text);
  position: relative;
  padding-left: 1.5rem;
}
.info-panel li::before {
  content: '•';
  color: var(--golden-tint);
  position: absolute;
  left: 0;
}
/* --- Styles for the new Contact Panel --- */
.contact-panel-content, .social-links-content {
    width: 100%;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}
.panel-button {
    padding: 1rem 2rem;
    border-radius: 2rem;
    font-size: 1.25rem;
    font-weight: bold;
    text-decoration: none;
    color: var(--glass-text);
    box-shadow: var(--button-shadow);
    transition: all 0.3s ease-in-out;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: color-mix(in srgb, var(--blue-tint) 20%, transparent);
    cursor: pointer;
    /* FIX: Remove default browser border from <button> elements to match <a> tags. */
    border: none;
}
.panel-button:hover, .panel-button:focus-visible {
    transform: scale(1.02);
    box-shadow: 0 0 15px color-mix(in srgb, var(--blue-tint) 40%, transparent), var(--button-shadow);
}
.panel-button.social {
    background-color: color-mix(in srgb, var(--purple-tint) 20%, transparent);
}
.panel-button.social:hover, .panel-button.social:focus-visible {
    box-shadow: 0 0 15px color-mix(in srgb, var(--purple-tint) 40%, transparent), var(--button-shadow);
}
.social-link-button {
    padding: 1rem;
    background-color: color-mix(in srgb, var(--golden-tint) 20%, transparent);
}
.social-link-button:hover, .social-link-button:focus-visible {
    transform: scale(1.02);
    box-shadow: 0 0 15px color-mix(in srgb, var(--golden-tint) 40%, transparent), var(--button-shadow);
}
/* Close button styling */
.close-button {
  /* FIX: Change position to 'fixed' to keep it from scrolling with the panel content. */
  position: fixed;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  background-color: color-mix(in srgb, var(--red-tint) 20%, transparent);
  box-shadow: var(--button-shadow);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.3s ease-in-out;
  z-index: 101;
  /* FIX: Hide the button by default; JS will show it when its panel is active. */
  opacity: 0;
  pointer-events: none;
  transform: scale(0.9);
  transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}
.close-button.active {
  /* FIX: Make the button visible when its panel is active. */
  opacity: 1;
  pointer-events: auto;
  transform: scale(1);
}
.close-button:hover, .close-button:focus-visible {
  transform: scale(1.1);
  box-shadow: 0 0 15px color-mix(in srgb, var(--red-tint) 50%, transparent), var(--button-shadow);
}
.close-button svg {
  width: 20px;
  height: 20px;
  stroke: var(--glass-text);
  stroke-width: 2;
}
body.info-panel-open {
  overflow: hidden;
}

/* --- NEW: Disable background blur when a panel is open --- */
body.info-panel-open .glass-container,
body.info-panel-open .search-bar,
body.info-panel-open .search-button,
body.info-panel-open .floating-button,
body.info-panel-open .info-button {
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  transition: backdrop-filter 0.3s ease-in-out, -webkit-backdrop-filter 0.3s ease-in-out;
}

/* --- NEW: Disable hover effects when a panel is open --- */
body.info-panel-open .glass-container:hover,
body.info-panel-open .search-button:hover,
body.info-panel-open .floating-button:hover,
body.info-panel-open .info-button:hover,
body.info-panel-open .favorite-btn:hover {
  transform: none;
  box-shadow: var(--glass-shadow); /* Resets to the default shadow */
  cursor: default;
  pointer-events: none; /* Strongest way to prevent interaction */
}

@media (max-width: 600px) {
  .top-left-fixed-wrapper {
    padding: 20px;
  }
  .info-panel {
    padding: 60px 20px 20px;
  }
  .info-panel h2 {
    font-size: 1.5rem;
  }
  .info-panel p {
      font-size: 1rem;
  }

  /* NEW: Tutorial Panel specific styles for mobile */
  .tutorial-content ul {
    padding-left: 0;
    text-align: left;
  }
  .tutorial-content li {
    padding-left: 0;
    margin-bottom: 1rem;
  }
  .tutorial-content li::before {
    content: ''; /* Hide the bullet on mobile for a cleaner look */
  }
}
.tutorial-icon, .tutorial-icon-text {
  width: 24px;
  height: 24px;
  flex-shrink: 0; /* Prevent icon from shrinking */
  display: flex; /* Use flex to center the icon/emoji */
  align-items: center;
  justify-content: center;
}
.tutorial-icon svg {
  width: 100%;
  height: 100%;
  stroke: var(--glass-text);
  stroke-width: 2;
  fill: none;
}

/* --- Tutorial Panel Specific Styles --- */
.tutorial-section {
  margin-bottom: 2rem;
}
.tutorial-heading {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--golden-tint);
  margin-bottom: 1rem;
  text-align: left;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
#tutorialStartButton {
  margin-top: 2rem;
  width: 100%;
  /* FIX: Explicitly set the background color and ensure the hover effect is smooth. */
  background-color: color-mix(in srgb, var(--blue-tint) 20%, transparent);
}
#tutorialStartButton:hover, #tutorialStartButton:focus-visible {
  /* FIX: Add back the scale transform to match other buttons, along with the box-shadow. */
  transform: scale(1.02);
  box-shadow: 0 0 15px color-mix(in srgb, var(--blue-tint) 40%, transparent), var(--button-shadow);
}
#tutorialPanel .info-content li {
  display: flex;
  align-items: flex-start;
  /* FIX: Remove padding and use a larger gap for better spacing */
  padding-left: 0;
  gap: 1.5rem;
}
#tutorialPanel .info-content li > div {
  line-height: 1.5;
}
#tutorialPanel li::before {
  content: none;
}

/* --- NEW: Styles for Panel Load Animation --- */
.panel-anim-item {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
/* REFACTOR: Animate items when they get the 'in-view' class, not just when the panel is active. */
.panel-anim-item.in-view {
  opacity: 1;
  transform: translateY(0);
}

/* FIX: Create a new 'modal-panel' class to restore the original centered pop-up style for Contact/Social panels. */
.modal-panel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100lvh;
  padding: 40px;
  box-sizing: border-box;
  background-color: var(--glass-bg);
  backdrop-filter: blur(var(--panel-blur-start));
  -webkit-backdrop-filter: blur(var(--panel-blur-start));
  z-index: 100;
  display: flex; /* Use flex to center content */
  justify-content: center;
  align-items: center;
  transform: scale(0.95);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease-in-out, transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), backdrop-filter 0.5s ease-in-out;
}
.modal-panel.active {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
