<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lost to be found</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Basic Styling --- */
        * {
            box-sizing: border-box;
        }

        /* Crucial: HTML takes full height and allows body to define scrollable area */
        html {
            height: 100%; /* Ensures html fills the viewport */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            min-height: 100vh; /* Body should be at least viewport height, and grow with content */
            position: relative;
            z-index: 1;
            transition: color 0.5s ease;
            /* No background on body here, it's for the fixed-background div */
        }

        /* --- LOADING SCREEN OVERLAY (fixed on top) --- */
        #loading-screen {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.9);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          transition: opacity 0.5s ease;
        }

        #loading-screen.hidden {
          opacity: 0;
          pointer-events: none;
        }

        /* --- LOADING INDICATOR CONTAINER (holds hearts) --- */
        .loading-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        /* --- LOADING HEART ANIMATION --- */
        .loading-indicator span {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin: 0 5px;
            color: white;
            font-size: 15px;
            opacity: 0;
            transform: scale(0.5);
            animation: pulse-heart 1.4s ease-in-out infinite;
        }

        .loading-indicator span:nth-child(1) { animation-delay: 0s; }
        .loading-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .loading-indicator span:nth-child(3) { animation-delay: 0.4s; }
        .loading-indicator span:nth-child(4) { animation-delay: 0.6s; }
        .loading-indicator span:nth-child(5) { animation-delay: 0.8s; }


        @keyframes pulse-heart {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0; transform: scale(0.5); }
        }


        /* --- LOADING PERCENTAGE TEXT --- */
        .loading-percentage {
          color: #fff;
          font-size: 24px;
          font-family: "Ubuntu", sans-serif;
          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }


         /* --- Wrapper for main page content --- */
        #page-content-wrapper {
            transition: filter 0.5s ease-in-out;
            position: relative;
            z-index: 0;
            width: 100%;
            min-height: 100vh; /* Important: Ensures the wrapper stretches to at least viewport height */
        }

        body.loading #page-content-wrapper {
            filter: blur(15px);
            pointer-events: none;
        }

        /* --- FIXED BACKGROUND STYLES --- */
        .fixed-background {
            position: fixed; /* Fixed to the viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* This is height of the viewport */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1; /* Place behind other content */
            transition: opacity 0.5s ease;
        }

        /* For the background to expand under content, we'll make the page-content-wrapper
           effectively control the *scrollable height*, and the fixed-background
           will simply cover the *viewport*. This is the nature of `position: fixed`.
           If you truly want the FIXED background to expand with the CONTENT,
           you cannot use `position: fixed`. Instead, you'd apply the background
           to the highest common parent that holds ALL content, and ensure
           that parent is large enough. However, this means the background would scroll.

           If the goal is to have the background *visually appear* to cover the entire
           scrollable content area, but remain fixed relative to the viewport,
           then the current `fixed` approach for the images is correct.
           The "white part at the bottom" could be due to small content,
           or other elements covering the bottom.

           Let's assume you want the image to always fill the viewport (fixed)
           and handle the "white part" by ensuring content pushes the height.
        */


        .fixed-background.light-background {
             background-image: url('https://i.ibb.co/W4PTCf4P/F59-EDCDE-25-A7-4-E02-BEBF-16-F94-CEE075-E.png');
             opacity: 1;
        }

        .fixed-background.dark-background {
             background-image: url("https://i.ibb.co/4Z82GLJt/EF83-F245-8482-467-E-AA8-A-AA50-CB9-E7778.png");
             opacity: 0;
        }

        body.dark-mode .fixed-background.light-background {
            opacity: 0;
        }
         body.dark-mode .fixed-background.dark-background {
            opacity: 1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.9);
            }
        }

        .blur-effect {
            backdrop-filter: blur(4px);
            transition: background-color 0.5s ease;
        }

        .blur-effect {
            background-color: rgba(255, 255, 255, 0.7);
        }

        body.dark-mode .blur-effect {
            background-color: rgba(31, 41, 55, 0.9);
        }

        body:not(.dark-mode) .glow {
            box-shadow: 0 0 15px 3px rgba(255, 215, 0, 0.9);
             transition: box-shadow 0.3s ease;
        }

        body.dark-mode .glow {
            box-shadow: 0 0 10px rgba(192, 132, 252, 0.8);
             transition: box-shadow 0.3s ease;
        }

        button {
             transition: color 0.3s ease, background-color 0.3s ease, transform 0.1s ease-out, box-shadow 0.3s ease;
        }

        button.tapped {
            transform: scale(0.97);
        }

        .shadow-lg-custom {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        .fade-out {
            animation: fadeOut 0.3s ease-in-out;
        }
        .glow-word {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
        }

       #content {
            padding: 2rem;
            padding-top: 6rem;
            position: relative;
            z-index: 1;
            margin-left: auto;
            margin-right: auto;
            max-width: 800px;
            border-radius: 0.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            background-color: transparent;
            transition: opacity 0.5s ease-in-out;
            opacity: 1;
        }

        #content.content-fading {
            opacity: 0;
        }

        #text span {
            cursor: pointer;
            display: inline;
            transition: text-shadow 0.3s ease, color 0.3s ease, -webkit-text-fill-color 0.3s ease;
            opacity: 1;
            transform: none;
        }

        #text span:hover {
             color: #9333EA;
        }

        body:not(.dark-mode) #text span:not(.glow-word) {
             text-shadow: 0 0 1px rgba(0, 0, 0, 0.5);
             -webkit-text-stroke: none;
             text-stroke: none;
             -webkit-text-fill-color: initial;
             color: inherit;
        }

        body.dark-mode #text span:not(.glow-word) {
            text-shadow: 0 0 1px rgba(255, 255, 255, 0.5);
             -webkit-text-stroke: none;
             text-stroke: none;
             -webkit-text-fill-color: white;
             color: white;
        }

        #text span.glow-word {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            text-shadow: none !important;
             -webkit-text-stroke: none !important;
             text-stroke: none !important;
             -webkit-text-fill-color: initial !important;
             color: initial !important;
             opacity: 1 !important;
             transform: none !important;
             transition-delay: 0ms !important;
             transition-duration: 0.3s !important;
        }

        #save-progress-button {
            z-index: 60;
        }

         body.dark-mode #content h1 {
             color: white;
             transition: color 0.5s ease;
        }

         body:not(.dark-mode) #content h1 {
             color: inherit;
             transition: color 0.5s ease;
        }

        #popup > div {
             transition: background-color 0.5s ease, color 0.5s ease;
        }

        #text p {
            margin-bottom: 1rem;
        }

        @keyframes spin-once {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        .animate-spin-once {
          animation: spin-once 0.5s ease-in-out;
        }

    </style>
</head>
<body class="loading">
    <div id="loading-screen">
        <div class="loading-indicator">
            <span>โค๏ธ</span> <span>โค๏ธ</span> <span>โค๏ธ</span> <span>โค๏ธ</span> <span>โค๏ธ</span>
        </div>
        <div class="loading-percentage">0%</div>
    </div>

    <div class="fixed-background light-background"></div>
    <div class="fixed-background dark-background"></div>

    <div id="page-content-wrapper">

        <div id="raw-ar-text" style="display: none;">

โ ูุงููุง ุฃูุงู ูุฑุขุฉ ุงูุญููุงู ุงููุบููุ ุฃุญุฏูู ูู ุงูุนูุงุณู ูุฃููู ุฃุจุญุซ ุนูู ุจุฏุงุฎููุ ูุงูุณุง ูููุณู ุจุชูู ุงููููุงุช.
โ ุฃุญูุงููุง ุฃุญุงูู ุฃู ุฃูุธุฑ ุฅูู ูุฌูู ุจุนูู ูุง ุชุดุจู ุนููููุ ุจุนูู ุฑุจูุง ุชุณุชุทูุน ุฃู ุชุฑู ูุง ููู ูุซู ูุง ุฃุฑู ูู ุงูุขุฎุฑููโฆ
โ ูุนููู ุฃูุชุดู ููู ูุฑุงูู ุงููุงุณุ ูููู ููุฑุฃูู ูุฐุง ุงููุฌู ุงูุฐู ูุง ุฃูุงุฏ ุฃุณุชูุนุจู ุจููุณู.
โ ุฃุญุฏูู ุทูููุงูุ ููุน ุฐูู ุชุธู ุตูุฑุชู ูุจููุฉุ ุถุจุงุจูุฉุ ูุฃูููุง ุงูุนูุงุณ ูู ูุงุกู ุฑุงูุฏ.
โ ุฌุณุฏูุ ูุฌูุฏูุ ูุญุชู ุตูุชู ุฃุญูุงููุงโฆ ููููุง ุชุจุฏู ูู ูุฃุดูุงุก ุฃุนุฑููุง ูู ุจุนูุฏ.
โ ูุฃููู ูู ุฃุฑู ููุณู ูุทุ ููุง ูุฑุงูุง ุงูุขุฎุฑูู.

โ ุฃุชุณุงุกู ูุซูุฑูุงโฆ ุนูุฏูุง ููุธุฑูู ุฅููุ ูู ููุงุญุธูู ุชูู ุงูุชูุงุตูู ุงูุฏูููุฉ ุงูุชู ุฃุบูู ุนููุงุ
โ ูู ูุฑูู ูุง ุฃุฑุงู ุฃูุง ููููุ ุญูู ุฃุชุฃูู ูุฌููููุ ูุฃุดุนุฑ ุจุฃุดูุงุก ูุง ุชููุงูุ
โ ูู ูุณุชุทูุน ุฃุญุฏูู ุฃู ูููู ุชุนุงุจูุฑู ุงูุตุงูุชุฉ ุงูุชู ูุง ุฃููููุง ุญุชู ุฃูุงุ

โ ุบุฑูุจ ูู ูุฐุง ุงูุชูุงูุถโฆ ุฃุณุชุทูุน ุฃู ุฃุฑู ุจูุถูุญ ูุง ูุฎููู ุงููุงุณ ุฎูู ูุธุฑุงุชููุ
โ ูุฃุดุนุฑ ุจุฃุญุฒุงููู ุญุชู ุฅู ูู ูุชุญุฏุซูุงุ
โ ููููู ุญูู ุฃูุธุฑ ุฅูู ููุณูุ ูุง ุฃุฑู ุฅูุง ูุฑุงุบูุงโฆ ุธูููุง ุจุงูุชูุง ุจูุง ููุงูุญ.

โ ุฃุญูุงููุง ุฃุชููู ูู ุงุณุชุทุนุช ุฃู ุฃุฎุฑุฌ ูู ุฌุณุฏู ููููู ูุงุญุฏ ููุท.
โ ุฃุนูุด ูู ุฌุณุฏู ุขุฎุฑุ
โ ุฃุฌูุณ ูุจุงูุชูุ
โ ุฃูุธุฑ ูู ุนููููุ ููุง ุฃูุธุฑ ูู ุฃุนูู ุดุฎุต ุฃุญุจูุ
โ ูุฃุญุงุฏุซ ููุณู ููุง ูู ููุช ุตุฏูููุง ุญูููููุง ูู.
โ ุฃุชููู ุฃู ุฃุนุฑู ููู ูู ุดุนูุฑ ุฃู ุฃููู ุฃูุงโฆ ูู ุงูุฎุงุฑุฌ.
โ ูุฃููู ูููุง ุญุงููุชุ ูุง ุฃุตุฏู ูุง ููุงู ูู.
โ ูุง ุฃุตุฏู ุงููุฏูุญุ
โ ุฃุจุชุณูุ ุฃูุฒ ุฑุฃุณูุ
โ ููู ููุจู ูููุณ: โูุณุชู ููุง ููููููโ.
โ ูุฃููู ุจุจุณุงุทุฉโฆ ูู ุฃุฑูู ุจุนุฏ.

โ ุฎูุงูู ูุงุณุนุ ูุดุงุนุฑู ุชุชุถุฎู ููููุง ุจุนุฏ ูููุ
โ ุญุณุงุณููุชู ุชุฌุงู ูุง ุญููู ุชุชุฌุงูุฒ ูุง ูููููู ุชุญููู ุฃุญูุงููุงุ
โ ููููุง ูุจุฑุชุ ุดุนุฑุช ุฃููู ุฃุถูุน ุฃูุซุฑ.
โ ุงูุนูุฑ ูุตูุฑโฆ ูุฃูุง ุจุงููุงุฏ ุฃููู ููุณูุ
โ ูููู ูู ุฃู ุฃููู ุบูุฑูุ

โ ุฃูุซุฑ ูุง ูุคูููู ูู ูุฐุง ุงูุดุนูุฑ ุงูุนููู ุจุนุฏู ุงููููู.
โ ูุง ุฃุญุฏ ูููููู.
โ ุจู ุญุชู ุฃูุง ูุง ุฃููููู.
โ ุฃุณูุก ุงูุธู ุจููุณูุ
โ ุฃุญุงูู ููุงูุงูุ
โ ุฃุฌูุฏ ููุจูุ
โ ูุฃุบุถุจ ูู ุฑูุญู.
โ ุนุงููู ุงูุฏุงุฎูู ูุฒุฏุงุฏ ุงุชุณุงุนูุงุ
โ ููู ุงููุณุงูุฉ ุจููู ูุจูู ูู ุญููู ุชุชูุณุน ูู ุงูุฃุฎุฑู.
โ ููู ูุญุธุงุช ูุซูุฑุฉุ ุฃุดุนุฑ ุฃูููโฆ ุฃุทูู ุจุนูุฏูุง ุนู ูู ุดูุก.

โ ููู ุญูู ูุดุนุฑ ุจู ุฃุญุฏูู ุญููุงุ ุญูู ููุธุฑ ูู ุนููู ููุฑุงููุ
โ ุฃุดุนุฑ ุจุณุนุงุฏุฉ ุนุงุฑูุฉ.
โ ุฃุชุนููู ุจูุ
โ ุฃุชูุณู ุจู ุจููุฉุ
โ ูุฃูู ุงูุถูุก ุงููุญูุฏ ูู ุนุชูุชู.
โ ูููููู ุฏุงุฆูุง ูุง ูููููู ูุดูููุ ููุตุจุงุญ ูู ุงูุฒุฌุงุฌโฆ
โ ูุญูู ุฃุถูููู ุจุดุฏุฉุ
โ ูููุณุฑูู.
โ ู ููุทูุฆ ูุนูู ุงูุถูุกุ
โ ููุชุจุนุซุฑ ุงูุฒุฌุงุฌ.
โ ููุตูุจูู ุงูุดุธู.
โ ุฃูุฒู.
โ ูุฃุจูู ูุน ุงููุฏูุจ.
โ ูุฏูุจ ูุง ุชูุฏูู.
โ ูุฏูุจ ูุง ุชููุณู.
โ ูุฏูุจ ุชุฐูุฑูู ุจูุง ูุถู.

โ ููููู ุฑุบู ุฐููโฆ ูู ุฃุชููู ุนู ุงูุญุจ.
โ ุญุชู ูุฅู ูู ููู ูุฏุฑู ุฃู ุฃูุญูุจ ููุง ุฃุญูุจุ
โ ูู ุฃุชูููู ุนู ุงูุฒุฑุงุนุฉ 
โ ููุช ุฃุฒุฑุน ุงููููุจ ูุฒููุฑ ูู ุจุณุชุงู ุฑูุญูุ ููู ููู.
โ ููู ูุคุฎุฑูุงุ ูู ุชุนุฏ ุชููู.
โ ูู ุฃุนุฏ ุฃุฑู ูููุจูุง ูุชูุชูุญุฉ.
โ ูููุง ุฃุฏุฑูุชโฆ ุฑุจูุง ูุฃููุง ูู ุชูุชุฑู ูุชููู.
โ ููุช ุฃูุทููุง ุฏุงุฆููุงุ
โ ูุฃูุฏูููุงุ ุฅูุง ููู ุฃุญุจุจุชุ
โ ุฃู ูุฅุซุจุงุช ุฃููู ุฃุณุชุญู ุงูุญุจุ
โ ุฃู ูุดุงุนุฑู ุตุงุฏูุฉุ ุฑุบู ูู ูุง ูููุงู.

โ ููู ุฃุบูุจ ุงูุฒููุฑ  ููุง ูุนูู 
โ ุฅูุง ุชููุช ุจุจุทุฆ ูู ุฅูุงุกู ุฒุฌุงุฌู ุนูู ุฑููู ููุณูุ
โ ุฃู ุชูุทูู ุจูู ุตูุญุงุช ูุชุงุจ ูุง ูููุฑุฃุ
โ ุชูุงููุง ูุงููููุงุช ุงูุชู ุฃููููุงุ ูุงูุชู ูุง ูุณูุนูุง ุฃุญุฏ.
โ ูุงูุชูู ุจู ุงูุฃูุฑ ูู ุจุณุชุงูู ุฌุงูุ ุจููุจู ูุงุฑุบุ
โ ูุนุทุฑ ุงูุญุจ ุชุจุฎูุฑ ูุน ุงูุฑูุญ 
โ ูุญุถุฑ ููุญุธุฉุ ุซู ูุบูุจ.

โ ููููโฆ
โ ูู ูุฐุง ูุง ููุจุบู ุฃู ูููู ุ
โ ุฑุจูุง ูุง.

โ ุฑุจูุง ุนููู ุฃู ุฃุชุฑู ุฒููุฑ ููุจู ุชููู ูู ุฃุฌูู ุฃูุง.
โ ุฃุนุชูู ุจูุงุ
โ ุฃุฑูููุงุ
โ ุฃุชุฑููุง ุชุชูุชูุญ ุฏุงุฎููุ
โ ุญุชู ูุฃุชู ูู ูุฑุงูุงุ
โ ูููุฏูุฑูุงุ
โ ููุง ููุทููุงุ
โ ุจู ูุฌูุณ ุฅูู ุฌุงูุจูุ
โ ููุฒุฑุน ูุนูโฆ
โ ุญุชู ูุตูุฑ ุงูููุจ ุญุฏููุฉุ ูุงูุญุฏููุฉ ุญููุงู ูุง ููุงูุฉ ูู.

โธป

โ ูุญูู ูุงุจูุช ุงูุฃูู ุฃุฎูุฑูุงุ
โ ุฃูุณูุชู ุจูู ูุฏุงูุ
โ ูุงู ุฎุงุฆููุงุ ููุงู:

โ โ ุขุณูโฆ
โ ุฃุนูู ุฃููู ุฌุฑุญุชู ูุซูุฑูุงุ
โ ุฃุนูู ุฃููู ููุช ุฃูุงููููุงุ
โ ูู ุฃููุฑ ุฅูุง ุจููุณูุ
โ ูุชุญุฏุซุช ุนูู ุจุณูุกุ
โ ูุฃุธูุฑุช ููุณู ุฏุงุฆููุง ูุฃููู ุงูุถุญูุฉ.โ

โ ูุงุทุนุชูุ ุจุตูุชู ูุงุฏุฆ:

โ โุงูุฏุฃโฆ
โ ูุง ุชุฎู.
โ ูู ุฃุคุฐูู.
โ ูุง ุชูููุ
โ ูู ุฃูุถุญ ุฃุณุฑุงุฑูุ
โ ุญุชู ุจุนุฏ ููู ูุง ูุนูุช.
โ ููุฏ ุงุฎุชุฑุชู ููุจู ููููู ุฎุฒูุฉู ููููุงุชูุ
โ ููู ุฃุฎุฐููโฆ ุญุชู ู ุฅู ุฎุฐูุชูู.โ

โ ููุงู ุจุฏูุดุฉ:
โ โููู... ููุงุฐุงุ
โ ููู ููููู ุฃู ุชููู ุจูุฐุง ุงูุจุฑูุฏุ!โ

โ โูู ุฃูู ุฅููู ูุงุฏุฆุ
โ ููู ุญุชู ุนูุฏ ุฎุฑูุฌู ูู ุญูุงุชูุ
โ ุจุนุฏ ุฃู ุชุฑูุช ุญูุฑุฉ ุนูููุฉ ูู ุตุฏุฑูุ
โ ุญุชู ุจุนุฏ ุฃู ุงููููุงุช ุงูุชู ูุณุฑุชูู ุฎุฑุฌุช ูู ูู ุดุฎุตู
โ ุธููุช ุฃูู ุณููู ูุณูุฏูโฆ
โ ุญุชู ุญูู ุฑููุชูู ูุฃููู ูุง ุดูุกุ
โ ูุฃูุง ููุช ุฃุฑุงู ุดูุฆูุง ูุงุฏุฑูุง ูุง ูุชูุฑูุฑุ
โ ุฃูุง ูุง ุฒูุช ุฃุฏุนู ุงููู ููุ
โ ุฃู ุชููู ุจุฎูุฑุ
โ ูุฃูู ููุช ููููุง ูุฑูุจูุง ูููุ
โ ุฌุฒุกูุง ูู ุนุงุฆูุฉู ุญููุช ุจูุง ุทูููุงู.
โ ุถุญููุง ูุนูุงุ
โ ุชูุงุณููุง ุงูุฎุจุฒุ
โ ุนุดูุง ูุญุธุงุช ุฌูููุฉ.
โ ููุช ุฃุชุฌุงูุฒ ุงูุณูุฆุ
โ ูุฃูู ุฃุคูู ุฃู ูุง ูู ุฌููู ุณูุจุฒุบ ููู.

โ ูููููโฆ ุชูุฑูุช.
โ ูู ุฃุฌู ุฎูุงูุงุชู ุชุงููุฉุ
โ ูุง ูุนูู ููุงุ
โ ุชุฑูุช ูุญุฏู ูู ูุนุฑูุฉ ูุน ุงููุฌูููุ
โ ูู ุงูุธูุงูุ
โ ูุน ุจุถุน ููุญุงุช ููุฑู ูู ุฅููุงูู ูู ุฃูุงุตู.
โ ููุฏ ุณูุทุชุ
โ ุฅุตุทุฏูุช ุจุฌุฏุฑุงู ุงููุงูุน ุงููุงุณูุฉุ
โ ููููู ูุงุตูุช.

โ ูุง ุฒูุช ุฃุฐูุฑ ุญุฏูุซู ุนู ุฃุญูุงููุ
โ ููู ููุชู ูุชุญูุณูุง ููุง ูุฃููุง ููุ
โ ููู ุฏุนูุช ุงููู ุฃู ุฃุฑุงู ุชุญูููุง.
โ ููู ุญูู ุทูุจุช ููู ุฃู ุชุฏุนู ููุ
โ ููุช ุจุจุณุงุทุฉ: ูุง ููููู ุฃูุฑู.โ

โ ุตูุช ุนุงุฑูโฆ

โ ุฃูููุช:
โ "ูุฑุบู ูู ุฐูู ูุงุฒูุช ุฃุฑูุฏ ุฃู ุฃุฑุงู ุจุฎูุฑุ ุญุชู ููู ูู ุจุนูุฏุ ุฃุญูุงูุงู ูุงุฒูุช ุฃุชููู ุฑุคูุชู ุชุญูู ูุง ุชุฑูุฏ."

โ ุณูุชูู ููููุงู.
โ ุซู ููุช:
โ โููููู ุงูุฐูุงุจ ุงูุขู.
โ ุงุนุชูู ุจููุณู.โ

โ ูุญูู ุฃุทููุชู ุณุฑุงุญ ุงูุฃูู ูู ุฒูุฒุงูุฉ ููุจูุ
โ ุดุนุฑุช ุจุฃููู ุฃุฎู ููููุง โฆ
โ ุจุงูุชุธุงุฑ ุงููุฑูุฉ ุงููุงุฏูุฉ
โ ุงูุชู ุณุฃุญุฑูุฑ ูููุง ุขูุงูุง ุฃุฎุฑู .
            </div>
        <div id="raw-fr-text" style="display: none;">
            </div>
        <div id="raw-en-text" style="display: none;">
            </div>

        <div class="fixed top-0 left-0 right-0 flex flex-col items-start p-4 space-y-2 z-50">
             <div class="flex justify-center space-x-4 mb-2">
                <button
                    id="ar-button"
                    onclick="changeLanguage('ar')"
                    class="text-purple-600 px-6 py-2 rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-purple-700 focus:outline-none blur-effect"
                >
                    ุงูุนุฑุจูุฉ
                </button>
                <button
                    id="fr-button"
                    onclick="changeLanguage('fr')"
                    class="text-purple-600 px-6 py-2 rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-purple-700 focus:outline-none blur-effect"
                >
                    Franรงais
                </button>
                <button
                    id="en-button"
                    onclick="changeLanguage('en')"
                    class="text-purple-600 px-6 py-2 rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-purple-700 focus:outline-none blur-effect"
                >
                    English
                </button>
             </div>
             <button
                 id="back-home-button"
                 onclick="window.location.href='https://dodch.github.io/Dodch-Stories-/index.html'"
                 class="text-purple-600 px-4 py-1 text-sm rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-purple-700 focus:outline-none blur-effect inline-flex items-center"
             >
                <span class="mr-1">&larr;</span> <span id="back-home-text">Back Home</span>
            </button>
        </div>


        <div id="content" class="rounded-lg mx-auto content-fading">
            <h1 id="title" class="text-3xl font-bold mb-4"></h1>
            <div id="text" class="text-lg leading-relaxed"></div>
        </div>

        <button
            id="save-progress-button"
            onclick="scrollToSavedWord()"
            class="fixed bottom-4 left-4 text-purple-600 px-6 py-2 rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-purple-700 focus:outline-none blur-effect"
            style="z-index: 60;"
        >
            Saved Progress
        </button>

        <div id="popup" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
            <div class="p-4 rounded-lg shadow-lg w-64 blur-effect fade-in">
                <h2 id="popup-title" class="text-lg font-bold mb-2">Save Position</h2>
                <p id="popup-text" class="mb-4 text-sm"></p>
                <div class="flex justify-end space-x-2">
                    <button
                        onclick="savePosition()"
                        class="bg-green-500 text-white px-4 py-2 rounded-full focus:outline-none"
                    >
                        Save
                    </button>
                    <button
                        onclick="closePopup()"
                        class="bg-red-500 text-white px-4 py-2 rounded-full focus:outline-none"
                    >
                        Exit
                    </button>
                </div>
            </div>
        </div>

        <div class="fixed bottom-4 right-4 z-50">
            <button
                id="dark-mode-toggle-button"
                onclick="toggleDarkMode()"
                class="text-gray-600 w-10 h-10 flex items-center justify-center rounded-full shadow-lg-custom transition duration-300 ease-in-out transform hover:scale-105 hover:text-gray-700 focus:outline-none blur-effect"
            >
                <span id="dark-mode-icon">โ๏ธ</span>
            </button>
        </div>

    </div>
    <script>
        const loadingScreen = document.getElementById("loading-screen");
        const loadPercentageText = document.querySelector(".loading-percentage");
        const body = document.body;

        let currentLanguage = 'en';
        let allSavedProgress = {};
        let tempSavedWordId = '';
        let tempSavedWordText = '';
        let highlightedWordElement = null;
        let isDarkMode = false;

        const contentMap = {
            ar: {
                title: 'ุถุงุฆุน ูุฃูุฌุฏ',
                rawTextId: 'raw-ar-text',
                saveProgress: 'ุญูุธ ุงูุชูุฏู',
                savePosition: 'ุญูุธ ุงูููุถุน',
                save: 'ุญูุธ',
                exit: 'ุฎุฑูุฌ',
                atWord: 'ูููุฉ',
                positionSaved: 'ุงููููุน ูุญููุธ',
                forWord: 'ููููุฉ',
                wordNotFound: 'ุงููููุฉ ุงููุญููุธุฉ ูู ูุชู ุงูุนุซูุฑ ุนูููุง ูู ุงููุต ุงูุญุงูู.',
                noWordSaved: 'ูู ูุชู ุญูุธ ุฃู ูููุฉ ููุฐู ุงููุบุฉ ุจุนุฏ',
                backHome: 'ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ'
            },
            fr: {
                title: 'Perdu ร trouver',
                rawTextId: 'raw-fr-text',
                saveProgress: 'Enregistrer le progrรจs',
                savePosition: 'Enregistrer la position',
                save: 'Enregistrer',
                exit: 'Sortir',
                atWord: 'mot',
                positionSaved: 'La position est enregistrรฉe',
                forWord: 'pour le mot',
                wordNotFound: 'Le mot enregistrรฉ n\'a pas รฉtรฉ trouvรฉ dans le texte actuel.',
                noWordSaved: 'Aucun mot n\'a รฉtรฉ enregistrรฉ pour cette langue encore',
                backHome: 'Retour ร l\'accueil'
            },
            en: {
                title: 'lost to be found',
                rawTextId: 'raw-en-text',
                saveProgress: 'Saved Progress',
                savePosition: 'Save Position',
                save: 'Save',
                exit: 'Exit',
                atWord: 'word',
                positionSaved: 'Position saved',
                forWord: 'for the word',
                wordNotFound: 'Saved word not found in current text.',
                noWordSaved: 'No word has been saved for this language yet',
                backHome: 'Back Home'
            },
        };

        // Reverted: References to fixed background divs
        const lightBackgroundDiv = document.querySelector('.fixed-background.light-background');
        const darkBackgroundDiv = document.querySelector('.fixed-background.dark-background');

        const contentDiv = document.getElementById('content');
        const textElement = document.getElementById('text');
        const titleElement = document.getElementById('title');
        const backHomeButton = document.getElementById('back-home-button');
        const backHomeTextSpan = document.getElementById('back-home-text');


        function applyTextEffects() {
            const textSpans = textElement.querySelectorAll('span[id^="word-p"]');
            const isDarkModeActive = document.body.classList.contains('dark-mode');

            textSpans.forEach(span => {
                 if (!span.classList.contains('glow-word')) {
                     if (isDarkModeActive) {
                         span.style.textShadow = '0 0 1px rgba(255, 255, 255, 0.5)';
                         span.style.webkitTextStroke = 'none';
                         span.style.textStroke = 'none';
                         span.style.webkitTextFillColor = 'white';
                         span.style.color = 'white';
                     } else {
                         span.style.textShadow = '0 0 1px rgba(0, 0, 0, 0.5)';
                         span.style.webkitTextStroke = 'none';
                         span.style.textStroke = 'none';
                         span.style.webkitTextFillColor = 'initial';
                         span.style.color = 'inherit';
                     }
                 }
             });
        }

        function clearSavedProgress() {
             delete allSavedProgress[currentLanguage];
             localStorage.setItem('allSavedProgress', JSON.stringify(allSavedProgress));

             if (highlightedWordElement) {
                highlightedWordElement.classList.remove('bg-yellow-200', 'bg-yellow-600', 'rounded', 'glow-word');
                applyTextEffects();
                highlightedWordElement = null;
             }
             console.log(`Saved progress for ${currentLanguage.toUpperCase()} cleared.`);
        }


        function changeLanguage(lang, fromLoad = false) {
            if (contentDiv.classList.contains('content-fading') && !fromLoad) {
                 return;
            }
            if (currentLanguage === lang && !fromLoad) {
                 return;
            }

            currentLanguage = lang;

            if (!fromLoad) {
                 localStorage.setItem('preferredLanguage', lang);
            }


            const content = contentMap[lang];

            contentDiv.classList.add('content-fading');

            const rawTextElement = document.getElementById(content.rawTextId);
            const rawText = rawTextElement ? rawTextElement.textContent.trim() : '';

            setTimeout(() => {
                titleElement.textContent = content.title;
                backHomeTextSpan.textContent = content.backHome;


                if (lang === 'ar') {
                    contentDiv.dir = 'rtl';
                    textElement.style.textAlign = 'right';
                } else {
                    contentDiv.dir = 'ltr';
                    textElement.style.textAlign = 'left';
                }

                textElement.innerHTML = '';

                if (rawText) {
                    const paragraphs = rawText.split('\n\n');

                    paragraphs.forEach((paragraph, pIndex) => {
                         const lines = paragraph.split('\n');

                         lines.forEach((line, lIndex) => {
                             const trimmedLine = line.trim();

                             if (trimmedLine === '') {
                                  const br = document.createElement('br');
                                  textElement.appendChild(br);
                             } else {
                                 const pElement = document.createElement('p');
                                 pElement.classList.add('mb-4', 'text-lg', 'leading-relaxed');


                                 const wordsAndSpaces = trimmedLine.match(/\S+|\s+|[.,!?;:]/g);

                                 if (wordsAndSpaces) {
                                     wordsAndSpaces.forEach((part, partIndex) => {
                                         if (part.trim() === '' && !/[.,!?;:]/.test(part)) {
                                             pElement.appendChild(document.createTextNode(part));
                                         } else {
                                             const span = document.createElement('span');
                                             span.textContent = part;
                                             span.classList.add('cursor-pointer');

                                             const uniqueId = `word-p${pIndex}-l${lIndex}-part${partIndex}`;
                                             span.id = uniqueId;

                                             span.onclick = () => handleWordClick(uniqueId, span.textContent.trim());

                                             pElement.appendChild(span);
                                         }
                                     });
                                 }
                                 textElement.appendChild(pElement);
                             }
                         });
                    });
                } else {
                     const noTextElement = document.createElement('p');
                     noTextElement.classList.add('text-center', 'text-xl', 'text-gray-500');
                     noTextElement.textContent = `No text available for ${lang.toUpperCase()}. Please add content to the raw text div.`;
                     textElement.appendChild(noTextElement);
                     console.warn(`No raw text found for language: ${lang}`);
                }


                document.getElementById('save-progress-button').textContent = content.saveProgress;
                document.getElementById('popup-title').textContent = content.savePosition;
                document.getElementById('popup').querySelector('.bg-green-500').textContent = content.save;
                document.getElementById('popup').querySelector('.bg-red-500').textContent = content.exit;

                document.getElementById('ar-button').classList.remove('glow');
                document.getElementById('fr-button').classList.remove('glow');
                document.getElementById('en-button').classList.remove('glow');
                document.getElementById(`${lang}-button`).classList.add('glow');

                 highlightWord();

                 const savedProgressForCurrentLang = allSavedProgress[currentLanguage];
                 if (fromLoad && savedProgressForCurrentLang && savedProgressForCurrentLang.id) {
                      setTimeout(() => {
                          scrollToSavedWord(false);
                      }, 100);
                 }

                contentDiv.classList.remove('content-fading');

                 if (isDarkMode) {
                     titleElement.style.color = 'white';
                 } else {
                      titleElement.style.color = 'inherit';
                 }

            }, 500);
        }

        function handleWordClick(spanId, wordText) {
            tempSavedWordId = spanId;
            tempSavedWordText = wordText;
            document.getElementById('popup-text').textContent = `${contentMap[currentLanguage].savePosition} ${contentMap[currentLanguage].atWord}: "${wordText}"?`;
            document.getElementById('popup').classList.remove('hidden');
            document.getElementById('popup').classList.remove('fade-out');
            document.getElementById('popup').classList.add('fade-in');
        }

        function closePopup() {
            document.getElementById('popup').classList.remove('fade-in');
            document.getElementById('popup').classList.add('fade-out');
            tempSavedWordId = '';
            tempSavedWordText = '';
            setTimeout(() => {
                document.getElementById('popup').classList.add('hidden');
            }, 300);
        }

        function savePosition() {
            if (tempSavedWordId) {
                allSavedProgress[currentLanguage] = {
                    id: tempSavedWordId,
                    text: tempSavedWordText
                };

                console.log(`${contentMap[currentLanguage].positionSaved} ${contentMap[currentLanguage].forWord}: "${tempSavedWordText}" (ID: ${tempSavedWordId}) in language "${currentLanguage}"`);

                localStorage.setItem('allSavedProgress', JSON.stringify(allSavedProgress));

                highlightWord();

            }
            closePopup();
        }

        function scrollToSavedWord(performChecks = true) {
            const savedProgressForCurrentLang = allSavedProgress[currentLanguage];

            if (!savedProgressForCurrentLang || !savedProgressForCurrentLang.id) {
                alert(contentMap[currentLanguage].noWordSaved);
                return;
            }

            const savedWordId = savedProgressForCurrentLang.id;
            const savedWordText = savedProgressForCurrentLang.text;

            const targetElement = document.getElementById(savedWordId);

            if (targetElement) {
                 highlightWord();

                 requestAnimationFrame(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 });

            } else {
                console.warn(`${contentMap[currentLanguage].wordNotFound} (ID: ${savedWordId}, Text: "${savedWordText}")`);
                if (performChecks) {
                    alert(`${contentMap[currentLanguage].wordNotFound} ("${savedWordText}")`);
                    const confirmClear = confirm(`Clear saved progress for ${currentLanguage.toUpperCase()}?`);
                    if (confirmClear) {
                        clearSavedProgress();
                    }
                } else {
                     console.warn(`Clearing saved progress for ${currentLanguage.toUpperCase()} due to missing element.`);
                     clearSavedProgress();
                }
            }
        }

       function highlightWord() {
           if (highlightedWordElement) {
               highlightedWordElement.classList.remove('bg-yellow-200', 'bg-yellow-600', 'rounded', 'glow-word');
               applyTextEffects();
               highlightedWordElement = null;
           }

           const savedProgressForCurrentLang = allSavedProgress[currentLanguage];

           if (!savedProgressForCurrentLang || !savedProgressForCurrentLang.id) {
               return;
           }

           const savedWordId = savedProgressForCurrentLang.id;

           const targetElement = document.getElementById(savedWordId);

           if (targetElement) {
               highlightedWordElement = targetElement;

               highlightedWordElement.classList.add('rounded', 'glow-word');

               if (document.body.classList.contains('dark-mode')) {
                   highlightedWordElement.classList.remove('bg-yellow-200');
                   highlightedWordElement.classList.add('bg-yellow-600');
               } else {
                   highlightedWordElement.classList.remove('bg-yellow-600');
                   highlightedWordElement.classList.add('bg-yellow-200');
               }

               highlightedWordElement.style.textShadow = 'none';
               highlightedWordElement.style.webkitTextStroke = 'none';
               highlightedWordElement.style.textStroke = 'none';
               highlightedWordElement.style.webkitTextFillColor = 'initial';
               highlightedWordElement.style.color = 'initial';

           } else {
               console.warn(`Element for saved word ID "${savedWordId}" not found for highlighting in language "${currentLanguage}".`);
           }
       }

        function toggleDarkMode() {
            const body = document.body;
            const languageButtons = document.querySelectorAll('#ar-button, #fr-button, #en-button');
            const saveButton = document.getElementById('save-progress-button');
            const darkModeToggleBtn = document.getElementById('dark-mode-toggle-button');
            const darkModeIcon = document.getElementById('dark-mode-icon');
            const popupDivInner = document.getElementById('popup').querySelector('div');
            const contentTitle = document.getElementById('title');

            isDarkMode = !isDarkMode;
            localStorage.setItem('darkModeEnabled', isDarkMode);

            darkModeToggleBtn.classList.add('animate-spin-once');
            darkModeToggleBtn.addEventListener('animationend', () => {
                darkModeToggleBtn.classList.remove('animate-spin-once');
            }, { once: true });


            if (isDarkMode) {
                body.classList.add('dark-mode');
                // These are now correctly manipulating the opacity of the fixed background divs
                lightBackgroundDiv.style.opacity = 0;
                darkBackgroundDiv.style.opacity = 1;

                languageButtons.forEach(button => {
                     button.classList.remove('text-purple-600', 'hover:text-purple-700');
                     button.classList.add('text-purple-300', 'hover:text-purple-400');
                });
                 saveButton.classList.remove('text-purple-600', 'hover:text-purple-700');
                 saveButton.classList.add('text-purple-300', 'hover:text-purple-400');

                 backHomeButton.classList.remove('text-purple-600', 'hover:text-purple-700');
                 backHomeButton.classList.add('text-purple-300', 'hover:text-purple-400');


                darkModeToggleBtn.classList.remove('text-gray-600', 'hover:text-gray-700');
                darkModeToggleBtn.classList.add('text-gray-400', 'hover:text-gray-300');

                darkModeIcon.textContent = '๐';

                popupDivInner.classList.remove('text-gray-800');
                popupDivInner.classList.add('text-white');

                contentTitle.style.color = 'white';

            } else {
                body.classList.remove('dark-mode');
                // These are now correctly manipulating the opacity of the fixed background divs
                lightBackgroundDiv.style.opacity = 1;
                darkBackgroundDiv.style.opacity = 0;

                 languageButtons.forEach(button => {
                     button.classList.remove('text-purple-300', 'hover:text-purple-400');
                     button.classList.add('text-purple-600', 'hover:text-purple-700');
                 });
                 saveButton.classList.remove('text-purple-300', 'hover:text-purple-400');
                 saveButton.classList.add('text-purple-600', 'hover:text-purple-700');

                 backHomeButton.classList.remove('text-purple-300', 'hover:text-purple-400');
                 backHomeButton.classList.add('text-purple-600', 'hover:text-purple-700');


                darkModeToggleBtn.classList.remove('text-gray-400', 'hover:text-gray-300');
                darkModeToggleBtn.classList.add('text-gray-600', 'hover:text-gray-700');

                darkModeIcon.textContent = 'โ๏ธ';

                popupDivInner.classList.remove('text-white');
                popupDivInner.classList.add('text-gray-800');

                 contentTitle.style.color = 'inherit';
            }

             applyTextEffects();
             highlightWord();
        }

        const animatedButtons = document.querySelectorAll('button:not(#popup button):not(#dark-mode-toggle-button)');
        animatedButtons.forEach(button => {
            button.addEventListener('click', function() {
                 if (this.id !== 'back-home-button') {
                    this.classList.add('tapped');
                    setTimeout(() => {
                        this.classList.remove('tapped');
                    }, 100);
                 }
            });
        });


        let load = 0;
        let interval = setInterval(updateLoadingText, 30);

        function updateLoadingText() {
          load++;

          if (load > 99) {
            clearInterval(interval);
            loadPercentageText.innerText = '100%';
          } else {
            loadPercentageText.innerText = `${load}%`;
          }
        }

        window.addEventListener('load', () => {
             if (load < 100) {
                 loadPercentageText.innerText = '100%';
             }

            setTimeout(() => {
                body.classList.remove('loading');
                loadingScreen.classList.add('hidden');

                setTimeout(() => {
                    loadingScreen.remove();
                 }, 600);

            }, 500);
        });


        document.addEventListener('DOMContentLoaded', () => {
             const savedProgressJson = localStorage.getItem('allSavedProgress');
             try {
                 allSavedProgress = JSON.parse(savedProgressJson) || {};
             } catch (e) {
                 console.error("Failed to parse saved progress from localStorage:", e);
                 allSavedProgress = {};
                 localStorage.removeItem('allSavedProgress');
             }

             const savedDarkMode = localStorage.getItem('darkModeEnabled');
             if (savedDarkMode !== null) {
                 isDarkMode = JSON.parse(savedDarkMode);
             } else {
                 isDarkMode = false;
             }

             // Correctly set initial opacity for fixed backgrounds based on isDarkMode
             if (isDarkMode) {
                 lightBackgroundDiv.style.opacity = 0;
                 darkBackgroundDiv.style.opacity = 1;
                 body.classList.add('dark-mode'); // Also add the class for other CSS rules
             } else {
                 lightBackgroundDiv.style.opacity = 1;
                 darkBackgroundDiv.style.opacity = 0;
                 body.classList.remove('dark-mode'); // Ensure no dark mode class initially
             }

             // Now call toggleDarkMode to set the icon and button colors
             // Toggle it once to reflect the *correct* loaded state initially
             // We need to 'invert' isDarkMode here because toggleDarkMode will flip it again
             isDarkMode = !isDarkMode; // This ensures the first call sets it to the loaded/default value
             toggleDarkMode();


             const preferredLanguage = localStorage.getItem('preferredLanguage');
             let initialLangToLoad = 'en';

             if (preferredLanguage && contentMap[preferredLanguage]) {
                initialLangToLoad = preferredLanguage;
             }

             changeLanguage(initialLangToLoad, true);

        });

</script>
</body>
</html>
