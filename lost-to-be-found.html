<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lost to be found</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- GLASS EFFECT VARIABLES & STYLES --- */
        :root {
            --glass-bg-light: rgba(255, 255, 255, 0.05);
            --glass-text-light: #ffffff;
            --glass-shadow-light:
                inset 0 0 0 1px color-mix(in srgb, #fff calc(10%), transparent),
                inset 1.8px 3px 0px -2px color-mix(in srgb, #fff calc(90%), transparent),
                inset -2px -2px 0px -2px color-mix(in srgb, #fff calc(80%), transparent),
                inset -3px -8px 1px -6px color-mix(in srgb, #fff calc(60%), transparent),
                inset -0.3px -1px 4px 0px color-mix(in srgb, #000 calc(12%), transparent),
                inset -1.5px 2.5px 0px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 0px 3px 4px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 2px -6.5px 1px -4px color-mix(in srgb, #000 calc(10%), transparent),
                0px 2px 10px 0px color-mix(in srgb, #000 calc(20%), transparent),
                0px 10px 30px 0px color-mix(in srgb, #000 calc(15%), transparent);
            --button-shadow-light: var(--glass-shadow-light);
            --pop-up-bg-light: rgba(255, 255, 255, 0.7);
            --pop-up-text-light: #1f2937;
            --main-bg-url-light: url('https://i.ibb.co/W4PTCf4P/F59-EDCDE-25-A7-4-E02-BEBF-16-F94-CEE075-E.png');
            --main-bg-url-dark: url("https://i.ibb.co/4Z82GLJt/EF83-F245-8482-467-E-AA8-A-AA50-CB9-E7778.png");
            --main-text-color-light: #f0f0f0;
            --main-text-color-dark: #f0f0f0;
            --text-on-glass-light: #9333EA;
            --save-button-bg-light: rgba(147, 51, 234, 0.6);
            --save-button-bg-dark: rgba(192, 132, 252, 0.25);
            --save-button-text-light: #ffffff;
            --save-button-text-dark: #ffffff;
            --back-button-bg-light: rgba(239, 68, 68, 0.6);
            --back-button-bg-dark: rgba(252, 165, 165, 0.25);
            --back-button-text-light: #ffffff;
            --back-button-text-dark: #ffffff;
            /* New variable for the content tint */
            --content-bg-light: rgba(0, 0, 0, 0.2);
            /* New variable for the selected language button text */
            --selected-lang-button-text: var(--save-button-text-light);
            /* New variable for the unselected language button text in light mode */
            --unselected-lang-text-light: #f0f0f0;
        }
        body.dark-mode {
            --glass-bg-dark: rgba(0, 0, 0, 0.25);
            --glass-text-dark: #f0f0f0;
            --glass-shadow-dark:
                inset 0 0 0 1px color-mix(in srgb, #fff calc(10%), transparent),
                inset 1.8px 3px 0px -2px color-mix(in srgb, #fff calc(90%), transparent),
                inset -2px -2px 0px -2px color-mix(in srgb, #fff calc(80%), transparent),
                inset -3px -8px 1px -6px color-mix(in srgb, #fff calc(60%), transparent),
                inset -0.3px -1px 4px 0px color-mix(in srgb, #000 calc(12%), transparent),
                inset -1.5px 2.5px 0px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 0px 3px 4px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 2px -6.5px 1px -4px color-mix(in srgb, #000 calc(10%), transparent),
                0px 2px 10px 0px color-mix(in srgb, #000 calc(40%), transparent),
                0px 10px 30px 0px color-mix(in srgb, #000 calc(30%), transparent);
            --button-shadow-dark: var(--glass-shadow-dark);
            --pop-up-bg-dark: rgba(31, 41, 55, 0.9);
            --pop-up-text-dark: #f0f0f0;
            --text-on-glass-dark: #C084FC;
            /* New variable for the content tint */
            --content-bg-dark: rgba(0, 0, 0, 0.2);
            /* New variable for the selected language button text */
            --selected-lang-button-text: var(--save-button-text-dark);
            /* New variable for the unselected language button text in dark mode */
            --unselected-lang-text-dark: #C084FC;
        }
        .glass-button-base {
            background-color: var(--glass-bg-light);
            box-shadow: var(--button-shadow-light);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 2.2), box-shadow 0.5s ease, background-color 0.5s ease;
        }
        body.dark-mode .glass-button-base {
            background-color: var(--glass-bg-dark);
            box-shadow: var(--button-shadow-dark);
        }
        .save-button-custom {
            background-color: var(--save-button-bg-light);
            color: var(--save-button-text-light);
        }
        body.dark-mode .save-button-custom {
            background-color: var(--save-button-bg-dark);
            color: var(--save-button-text-dark);
        }
        .back-home-button-custom {
            background-color: var(--back-button-bg-light);
            color: var(--back-button-text-light);
            font-size: 1.25rem;
        }
        body.dark-mode .back-home-button-custom {
            background-color: var(--back-button-bg-dark);
            color: var(--back-button-text-dark);
        }
        .glass-popup {
             border-radius: 2rem;
             padding: 1.5rem;
        }
        .glass-button-base:hover {
             transform: scale(1.1);
             box-shadow:
                inset 0 0 0 1px color-mix(in srgb, #fff calc(10%), transparent),
                inset 1.8px 3px 0px -2px color-mix(in srgb, #fff calc(90%), transparent),
                inset -2px -2px 0px -2px color-mix(in srgb, #fff calc(80%), transparent),
                inset -3px -8px 1px -6px color-mix(in srgb, #fff calc(60%), transparent),
                inset -0.3px -1px 4px 0px color-mix(in srgb, #000 calc(12%), transparent),
                inset -1.5px 2.5px 0px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 0px 3px 4px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 2px -6.5px 1px -4px color-mix(in srgb, #000 calc(10%), transparent),
                0px 4px 20px 0px color-mix(in srgb, #000 calc(30%), transparent),
                0px 20px 60px 0px color-mix(in srgb, #000 calc(25%), transparent);
        }
        body.dark-mode .glass-button-base:hover {
            box-shadow:
                inset 0 0 0 1px color-mix(in srgb, #fff calc(10%), transparent),
                inset 1.8px 3px 0px -2px color-mix(in srgb, #fff calc(90%), transparent),
                inset -2px -2px 0px -2px color-mix(in srgb, #fff calc(80%), transparent),
                inset -3px -8px 1px -6px color-mix(in srgb, #fff calc(60%), transparent),
                inset -0.3px -1px 4px 0px color-mix(in srgb, #000 calc(12%), transparent),
                inset -1.5px 2.5px 0px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 0px 3px 4px -2px color-mix(in srgb, #000 calc(20%), transparent),
                inset 2px -6.5px 1px -4px color-mix(in srgb, #000 calc(10%), transparent),
                0px 4px 20px 0px color-mix(in srgb, #000 calc(40%), transparent),
                0px 20px 60px 0px color-mix(in srgb, #000 calc(35%), transparent);
        }
        /* Custom styles for pop-up buttons to override glass background */
        #popup button.glass-button-base.bg-green-500 {
            background-color: rgba(34, 197, 94, 0.8) !important;
            backdrop-filter: blur(4px) !important;
            -webkit-backdrop-filter: blur(4px) !important;
        }

        #popup button.glass-button-base.bg-red-500 {
            background-color: rgba(239, 68, 68, 0.8) !important;
            backdrop-filter: blur(4px) !important;
            -webkit-backdrop-filter: blur(4px) !important;
        }

        /* Dark mode specific styles for the pop-up buttons */
        body.dark-mode #popup button.bg-green-500 {
            background-color: rgba(74, 222, 128, 0.4) !important;
        }

        body.dark-mode #popup button.bg-red-500 {
            background-color: rgba(252, 165, 165, 0.4) !important;
        }
        /* --- END OF GLASS EFFECT STYLES --- */
        /* --- Basic Styling --- */
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            position: relative;
            z-index: 1;
            transition: color 0.5s ease;
            color: var(--main-text-color-light);
        }
        body.dark-mode {
            color: var(--main-text-color-dark);
        }
        /* --- LOADING SCREEN OVERLAY (fixed on top) --- */
        #loading-screen {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.9);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          transition: opacity 0.5s ease;
        }
        #loading-screen.hidden {
          opacity: 0;
          pointer-events: none;
        }
        /* --- LOADING INDICATOR CONTAINER (holds hearts) --- */
        .loading-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        /* --- LOADING HEART ANIMATION --- */
        .loading-indicator span {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin: 0 5px;
            color: white;
            font-size: 15px;
            opacity: 0;
            transform: scale(0.5);
            animation: pulse-heart 1.4s ease-in-out infinite;
        }
        /* Add delays to create the trailing effect */
        .loading-indicator span:nth-child(1) { animation-delay: 0s; }
        .loading-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .loading-indicator span:nth-child(3) { animation-delay: 0.4s; }
        .loading-indicator span:nth-child(4) { animation-delay: 0.6s; }
        .loading-indicator span:nth-child(5) { animation-delay: 0.8s; }
        @keyframes pulse-heart {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0; transform: scale(0.5); }
        }
        /* --- LOADING PERCENTAGE TEXT --- */
        .loading-percentage {
          color: #fff;
          font-size: 24px;
          font-family: "Ubuntu", sans-serif;
          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
         /* --- Wrapper for main page content --- */
        #page-content-wrapper {
            transition: filter 0.5s ease-in-out;
            position: relative;
            z-index: 0;
            width: 100%;
            min-height: 100vh;
        }
        body.loading #page-content-wrapper {
            filter: blur(15px);
            pointer-events: none;
        }
        .fixed-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1;
            transition: opacity 0.5s ease;
        }
        .fixed-background.light-background {
             background-image: var(--main-bg-url-light);
             opacity: 1;
        }
        .fixed-background.dark-background {
             background-image: var(--main-bg-url-dark);
             opacity: 0;
        }
        body.dark-mode .fixed-background.light-background {
            opacity: 0;
        }
         body.dark-mode .fixed-background.dark-background {
            opacity: 1;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.9);
            }
        }
        /* New styles for unselected language buttons */
        .unselected-language {
            opacity: 0.8;
            filter: grayscale(60%);
            transform: scale(0.98);
            transition: opacity 0.3s ease, filter 0.3s ease, transform 0.3s ease;
        }
        .unselected-language:hover {
            transform: scale(0.95) !important;
            box-shadow: none !important;
        }
        .selected-language {
             background-color: var(--save-button-bg-light);
             color: var(--selected-lang-button-text);
             transform: scale(1.05);
             opacity: 1;
             filter: grayscale(0%);
             box-shadow: var(--button-shadow-light);
        }
        body.dark-mode .selected-language {
             background-color: var(--save-button-bg-dark);
        }
        #ar-button:hover, #fr-button:hover, #en-button:hover {
            transform: scale(1.05);
        }
        button {
             transition: color 0.3s ease, background-color 0.3s ease, transform 0.1s ease-out, box-shadow 0.3s ease;
        }
        button.tapped {
            transform: scale(0.97);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        .fade-out {
            animation: fadeOut 0.3s ease-in-out;
        }
        .glow-word {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
        }
        #content {
            padding: 2rem;
            padding-top: 6rem;
            position: relative;
            z-index: 1;
            margin-left: auto;
            margin-right: auto;
            max-width: 800px;
            border-radius: 0.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            transition: opacity 0.5s ease-in-out;
            opacity: 1;
            background-color: var(--content-bg-light);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
        }
        body.dark-mode #content {
            background-color: var(--content-bg-dark);
        }
        #content.content-fading {
            opacity: 0;
        }
        #text span {
            cursor: pointer;
            display: inline;
            transition: text-shadow 0.3s ease, color 0.3s ease, -webkit-text-fill-color 0.3s ease;
            opacity: 1;
            transform: none;
        }
        #text span:hover {
             color: var(--text-on-glass-light);
        }
        body.dark-mode #text span:hover {
             color: var(--text-on-glass-dark);
        }
        body:not(.dark-mode) #text span:not(.glow-word) {
             text-shadow: 0 0 1px rgba(0, 0, 0, 0.5);
             -webkit-text-stroke: none;
             text-stroke: none;
             -webkit-text-fill-color: initial;
             color: inherit;
        }
        body.dark-mode #text span:not(.glow-word) {
            text-shadow: 0 0 1px rgba(255, 255, 255, 0.5);
             -webkit-text-stroke: none;
             text-stroke: none;
             -webkit-text-fill-color: white;
             color: white;
        }
        #text span.glow-word {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            text-shadow: none !important;
             -webkit-text-stroke: none !important;
             text-stroke: none !important;
             -webkit-text-fill-color: initial !important;
             color: initial !important;
             opacity: 1 !important;
             transform: none !important;
             transition-delay: 0ms !important;
             transition-duration: 0.3s !important;
        }
        #save-progress-button {
            z-index: 60;
        }
        body.dark-mode #content h1 {
             color: white;
             transition: color 0.5s ease;
        }
         body:not(.dark-mode) #content h1 {
             color: inherit;
             transition: color 0.5s ease;
        }
        /* New styles for pop-up */
        #popup > div {
             background-color: var(--pop-up-bg-light);
             color: var(--pop-up-text-light);
             backdrop-filter: blur(4px);
             -webkit-backdrop-filter: blur(4px);
             transition: background-color 0.5s ease, color 0.5s ease;
             box-shadow: var(--glass-shadow-light);
        }
        body.dark-mode #popup > div {
             background-color: var(--pop-up-bg-dark);
             color: var(--pop-up-text-dark);
             box-shadow: var(--glass-shadow-dark);
        }
        #popup button.bg-green-500, #popup button.bg-red-500 {
             transition: background-color 0.3s ease;
        }
        #text p {
            margin-bottom: 1rem;
        }

        /* Jello Button Effect */
        .jello-button:hover {
            animation: jello-horizontal 0.9s both;
        }

        @keyframes jello-horizontal {
            0% { transform: scale3d(1, 1, 1); }
            30% { transform: scale3d(1.25, 0.75, 1); }
            40% { transform: scale3d(0.75, 1.25, 1); }
            50% { transform: scale3d(1.15, 0.85, 1); }
            65% { transform: scale3d(0.95, 1.05, 1); }
            75% { transform: scale3d(1.05, 0.95, 1); }
            100% { transform: scale3d(1, 1, 1); }
        }
    </style>
</head>
<body class="loading">
    <div id="loading-screen">
        <div class="loading-indicator">
            <span>❤️</span> <span>❤️</span> <span>❤️</span> <span>❤️</span> <span>❤️</span>
        </div>
        <div class="loading-percentage">0%</div>
    </div>
    <div class="fixed-background light-background"></div>
    <div class="fixed-background dark-background"></div>
    <div id="page-content-wrapper">
        <div id="raw-ar-text" style="display: none;">
            ‎ 
            ‎ أتمنى لو كنت شخصًا مميزًا. أتمنى لو كنت أكثر من مجرد ما أنا عليه.
            ‎ واقفا أمام مرآة الحمّام المغلق، أحدّق في انعكاسي كأنّي أبحث عني بداخله، هامسا لنفسي بتلك الكلمات.
            ‎ أحيانًا أحاول أن أنظر إلى وجهي بعين لا تشبه عينيّ، بعين ربما تستطيع أن ترى ما فيّ مثل ما أرى في الآخرين…
            ‎ لعلّي أكتشف كيف يراني الناس، وكيف يقرأون هذا الوجه الذي لا أكاد أستوعبه بنفسي.
            ‎ أحدّق طويلاً، ومع ذلك تظل صورتي مبهمة، ضبابية، كأنّها انعكاس في ماءٍ راكد.
            ‎ جسدي، وجودي، وحتى صوتي أحيانًا… كلّها تبدو لي كأشياء أعرفها من بعيد.
            ‎ كأنني لم أرَ نفسي قط، كما يراها الآخرون.
            ‎ أتساءل كثيرًا… عندما ينظرون إلي، هل يلاحظون تلك التفاصيل الدقيقة التي أغفل عنها؟
            ‎ هل يرون ما أراه أنا فيهم، حين أتأمل وجوههم، وأشعر بأشياء لا تُقال؟
            ‎ هل يستطيع أحدهم أن يفهم تعابيري الصامتة التي لا أفهمها حتى أنا؟
            ‎ غريب هو هذا التناقض… أستطيع أن أرى بوضوح ما يخفيه الناس خلف نظراتهم،
            ‎ وأشعر بأحزانهم حتى إن لم يتحدثوا،
            ‎ لكنني حين أنظر إلى نفسي، لا أرى إلا فراغًا… ظلًّا باهتًا بلا ملامح.
            ‎ أحيانًا أتمنى لو استطعت أن أخرج من جسدي ليومٍ واحد فقط.
            ‎ أعيش في جسدٍ آخر،
            ‎ أجلس قبالتي،
            ‎ أنظر في عينيّ، كما أنظر في أعين شخص أحبه،
            ‎ وأحادث نفسي كما لو كنت صديقًا حقيقيًا لي.
            ‎ أتمنى أن أعرف كيف هو شعور أن أكون أنا… من الخارج.
            ‎ لأنني مهما حاولت، لا أصدق ما يقال لي.
            ‎ لا أصدق المديح،
            ‎ أبتسم، أهز رأسي،
            ‎ لكن قلبي يهمس: “لستُ كما يقولون”.
            ‎ لأنني ببساطة… لم أرني بعد.
            ‎ خيالي واسع، مشاعري تتضخم يومًا بعد يوم،
            ‎ حساسيّتي تجاه ما حولي تتجاوز ما يمكنني تحمله أحيانًا،
            ‎ وكلما كبرت، شعرت أنني أضيع أكثر.
            ‎ العمر قصير… وأنا بالكاد أفهم نفسي،
            ‎ فكيف لي أن أفهم غيري؟
            ‎ أكثر ما يؤلمني هو هذا الشعور العميق بعدم الفَهم.
            ‎ لا أحد يفهمني.
            ‎ بل حتى أنا لا أفهمني.
            ‎ أسيء الظن بنفسي،
            ‎ أحاكم نواياي،
            ‎ أجلد قلبي،
            ‎ وأغضب من روحي.
            ‎ عالمي الداخلي يزداد اتساعًا،
            ‎ لكن المسافة بيني وبين من حولي تتّسع هي الأخرى.
            ‎ وفي لحظات كثيرة، أشعر أنني… أطفو بعيدًا عن كل شيء.
            ‎ لكن حين يشعر بي أحدهم حقًا، حين ينظر في عيني ويراني،
            ‎ أشعر بسعادة عارمة.
            ‎ أتعلّق به،
            ‎ أتمسك به بقوة،
            ‎ كأنه الضوء الوحيد في عتمتي.
            ‎ لكنّهم دائما ما يكونون هشّين، كمصباح من الزجاج…
            ‎ وحين أضمّهم بشدة،
            ‎ ينكسرون.
            ‎ و ينطفئ معهم الضوء،
            ‎ ويتبعثر الزجاج.
            ‎ ويصيبني الشظى.
            ‎ أنزف.
            ‎ وأبقى مع الندوب.
            ‎ ندوب لا تندمل.
            ‎ ندوب لا تُنسى.
            ‎ ندوب تذكرني بما مضى.
            ‎ لكنني رغم ذلك… لم أتوقف عن الحب.
            ‎ حتى وإن لم يكن قدري أن أُحَب كما أحِب،
            ‎ لم أتوقّف عن الزراعة
            ‎ كنت أزرع القلوب كزهور في بستان روحي، كلّ يوم.
            ‎ لكن مؤخرًا، لم تعد تنمو.
            ‎ لم أعد أرى قلوبًا متفتّحة.
            ‎ وهنا أدركت… ربما لأنها لم تُترك لتنمو.
            ‎ كنت أقطفها دائمًا،
            ‎ وأقدّمها، إما لمن أحببت،
            ‎ أو كإثبات أنني أستحق الحب،
            ‎ أن مشاعري صادقة، رغم كل ما يُقال.
            ‎ لكن أغلب الزهور كما نعلم
            ‎ إما تموت ببطئ في إناءٍ زجاجي على رفٍّ منسي،
            ‎ أو تُطوى بين صفحات كتاب لا يُقرأ،
            ‎ تمامًا كالكلمات التي أقولها، والتي لا يسمعها أحد.
            ‎ وانتهى بي الأمر في بستانٍ جاف، بقلبٍ فارغ،
            ‎ وعطر الحب تبخّر مع الريح
            ‎ يحضر للحظة، ثم يغيب.
            ‎ ولكن…
            ‎ هل هذا ما ينبغي أن يكون ؟
            ‎ ربما لا.
            ‎ ربما عليّ أن أترك زهور قلبي تنمو من أجلي أنا.
            ‎ أعتني بها،
            ‎ أرويها،
            ‎ أتركها تتفتّح داخلي،
            ‎ حتى يأتي من يراها،
            ‎ ويقدّرها،
            ‎ ولا يقطفها،
            ‎ بل يجلس إلى جانبي،
            ‎ ويزرع معي…
            ‎ حتى يصير القلب حديقة، والحديقة حقلاً لا نهاية له.
            ⸻
            ‎ وحين قابلت الألم أخيرًا،
            ‎ أمسكته بين يداي،
            ‎ كان خائفًا، وقال:
            ‎ “ آسف…
            ‎ أعلم أنني جرحتك كثيرًا،
            ‎ أعلم أنني كنت أنانيًّا،
            ‎ لم أفكر إلا بنفسي،
            ‎ وتحدثت عنك بسوء،
            ‎ وأظهرت نفسي دائمًا كأنني الضحية.”
            ‎ قاطعته، بصوتٍ هادئ:
            ‎ “اهدأ…
            ‎ لا تخف.
            ‎ لن أؤذيك.
            ‎ لا تقلق،
            ‎ لن أفضح أسرارك،
            ‎ حتى بعد كلّ ما فعلت.
            ‎ لقد اخترتَ قلبي ليكون خزنةً لكلماتك،
            ‎ ولن أخذلك… حتى و إن خذلتني.”
            ‎ فقال بدهشة:
            ‎ “لكن... لماذا؟
            ‎ كيف يمكنك أن تكون بهذا البرود؟!”
            ‎ “لم أقل إنني هادئ،
            ‎ لكن حتى عند خروجك من حياتي،
            ‎ بعد أن تركت حفرة عميقة في صدري،
            ‎ حتى بعد أن الكلمات التي كسرتني خرجت من فم شخصٍ
            ‎ ظننت أنه سكني وسندي…
            ‎ حتى حين رميتني كأنني لا شيء،
            ‎ وأنا كنت أراك شيئًا نادرًا لا يتكرّر،
            ‎ أنا ما زلت أدعو الله لك،
            ‎ أن تكون بخير،
            ‎ لأنك كنت يومًا قريبًا مني،
            ‎ جزءًا من عائلةٍ حلمت بها طويلاً.
            ‎ ضحكنا معًا،
            ‎ تقاسمنا الخبز،
            ‎ عشنا لحظات جميلة.
            ‎ كنت أتجاوز السيئ،
            ‎ لأني أؤمن أن ما هو جميل سيبزغ منه.
            ‎ لكنني… تُركت.
            ‎ من أجل خلافاتٍ تافهة،
            ‎ لا معنى لها،
            ‎ تركت وحدي في معركة مع المجهول،
            ‎ في الظلام،
            ‎ مع بضع لمحات نورٍ من إيماني كي أواصل.
            ‎ لقد سقطت،
            ‎ إصطدمت بجدران الواقع القاسية،
            ‎ لكنني واصلت.
            ‎ ما زلت أذكر حديثك عن أحلامك،
            ‎ وكم كنتُ متحمسًا لها كأنها لي،
            ‎ وكم دعوت الله أن أراك تحققها.
            ‎ لكن حين طلبت منك أن تدعو لي،
            ‎ قلت ببساطة: لا يهمني أمرك.”
            ‎ صمت عارم…
            ‎ أكملت:
            ‎ "ورغم كل ذلك مازلت أريد أن أراك بخير، حتى ولو من بعيد، أحياناً مازلت أتمنى رؤيتك تحقق ما تريد."
            ‎ سكتُّ قليلاً.
            ‎ ثم قلت:
            ‎ “يمكنك الذهاب الآن.
            ‎ اعتنِ بنفسك.”
            ‎ وحين أطلقتُ سراح الألم من زنزانة قلبي،
            ‎ شعرت بأنني أخف قليلا…
            ‎ بانتظار المرّة القادمة
            ‎ التي سأحرّر فيها آلاما أخرى .
        </div>
        <div id="raw-fr-text" style="display: none;">

Je voudrais être spécial. Je voudrais être plus que ce que je suis.
Fixant le miroir de la salle de bain dont la porte était verrouillée, je me suis murmuré cela à moi-même.
Il y a des moments où j’essaie de regarder mon visage avec des yeux qui ne sont pas les miens, en espérant que peut-être alors, juste peut-être, je comprendrai comment les autres me voient.
Parce que peu importe combien de temps je contemple mon reflet, je n’arrive jamais vraiment à saisir l’image entière de moi-même. Mon corps, ma présence—tout est flou pour moi. Je ne me suis jamais vraiment vu.

Je me demande toujours… quand ils me regardent, remarquent-ils les choses délicates et belles que j’ignore, tout comme je remarque souvent ces choses cachées en eux ?
Savent-ils lire mes expressions silencieuses, celles que moi-même je ne comprends pas ?
C’est étrange comme je peux ressentir les émotions enfouies au plus profond des autres, même quand ils essaient si fort de les cacher…
Mais quand il s’agit de moi, je ne vois que des ombres ternes et informes.

Parfois, je voudrais simplement pouvoir sortir de moi-même.
Vivre dans un autre corps, ne serait-ce qu’un jour.
M’asseoir en face de moi.
Me parler.
Me voir.
Savoir ce que cela fait d’exister dans cette peau, vue de l’extérieur.

Parce que peu importe mes efforts, je n’arrive pas à accepter les compliments.
Je hoche la tête, je souris… mais au fond, je n’y crois pas. Pas tant que je ne me vois pas vraiment.
Pas tant que je ne peux pas plonger dans mes propres yeux comme je plonge dans ceux de quelqu’un que j’aime.

Mon imagination, mes émotions, ma sensibilité—elles s’élargissent chaque jour, à l’infini.
Et plus elles grandissent, plus je me perds en moi-même.
La vie paraît trop courte. J’essaie encore de comprendre qui je suis, sans parler d’essayer de comprendre les autres.

Ce qui fait vraiment mal, c’est à quel point je me sens incompris.
Même par moi-même.
Je mal-interprète mes propres intentions. Je me blâme.
Je me punis.
Je me mets en colère contre moi.

Mon monde intérieur grandit, tandis que l’espace entre moi et les autres s’élargit aussi.
Parfois, j’ai l’impression de flotter au loin.

Alors, quand quelqu’un finit par me voir, vraiment me voir, je ressens une excitation et une joie profondes.
Je m’accroche à lui comme s’il était la seule lumière que j’ai.
Mais ils sont toujours fragiles, comme une ampoule en verre.
Et je serre trop fort.
Et quand je le fais, je les brise.
La lumière s’éteint.
Le verre éclate.
Et quand il se brise, il me coupe. Me fait saigner.
Laisse des cicatrices qui ne disparaissent jamais.
Des cicatrices qui restent.
Des cicatrices qui me rappellent.
Des cicatrices que je ne peux oublier.

Mais cela ne m’a jamais empêché d’aimer.
Même si l’amour ne semble pas inscrit dans mon destin, j’ai toujours essayé de le donner.
Plantant des cœurs comme des graines dans le jardin de mon âme, jour après jour.
Pourtant, ces derniers temps, ils ne semblent plus pousser. Je vois à peine fleurir ces formes de cœur.
Puis j’ai compris : peut-être est-ce parce que je les cueillais.
Je les offrais comme des cadeaux à ceux que j’aimais, ou peut-être comme preuve que je suis digne d’être aimé. Quelqu’un dont les sentiments sont profonds et vrais.

Mais la plupart des fleurs, comme on le sait, finissent dans des vases où leurs couleurs s’éteignent lentement, ou pressées entre les pages oubliées d’un vieux livre.
Tout comme les mots de celui qui les a offertes, laissés sans lecture.

Et ainsi, je me suis retrouvé avec un jardin vide, un cœur vide, et le parfum de l’amour emporté par le vent.
Présent juste un instant avant de disparaître de nouveau.

Mais… est-ce ainsi que les choses doivent être ?
Peut-être pas.
Peut-être qu’au lieu d’arracher mon amour et de l’offrir trop tôt, je le laisserai fleurir pour moi.
Je l’entretiendrai doucement, je le garderai vivant en moi—jusqu’au jour où quelqu’un viendra en voyant sa valeur.
Quelqu’un qui ne se contentera pas de prendre une fleur et de partir, mais qui s’agenouillera à mes côtés et m’aidera à les faire pousser.
Jusqu’à ce qu’ensemble, nous ayons planté un champ sans fin.

⸻

Quand j’ai enfin rencontré la douleur,
je l’avais entre mes mains.
Il a dit :
« Je suis désolé… je sais que je t’ai tellement blessé.
Je sais que je n’ai pensé qu’à moi, sans me soucier de toi.
Je sais que j’ai dit de mauvaises choses sur toi… et agi comme si j’étais la victime. »

Je l’ai interrompu, la voix calme :
« Chut… n’aie pas peur.
Je ne vais pas te faire de mal.
C’est bon.
Je ne te ferai aucun tort.
Je n’exposerai pas tes secrets, même après tout cela.
Tu as choisi mon cœur comme un coffre secret pour tes mots.
Et je ne te laisserai pas tomber, même si toi tu l’as fait. »

« Mais… pourquoi ?
Comment peux-tu être si calme ?! »

« Je n’ai jamais dit que j’étais calme.
Même si tu n’es plus dans ma vie,
après avoir laissé une grande cicatrice sur ma poitrine qui descend jusque dans mon cœur…
Même si les mots qui m’ont brisé venaient de celui
qui était censé être mon soutien et mon espoir.
Même si tu m’as jeté
comme un vulgaire morceau de rien
alors que je croyais que tu étais une partie précieuse et permanente de ma vie…
J’espère encore parfois que tu vas bien.
Parce qu’un jour, tu as été quelqu’un de très proche de moi.
Un nouveau membre de la famille que j’ai toujours souhaité avoir.
Tu as ri avec moi.
Partagé des repas avec moi.
Vécu de beaux moments avec moi.
Je ne me souciais pas beaucoup des moments amers que nous avons eus,
car j’ai toujours cru qu’il en sortirait quelque chose de bon.
J’ai appris à m’accrocher à ceux qui comptent pour moi,
même dans les pires conditions.

Mais moi ?
J’ai été laissé.
Pour les disputes les plus futiles.
Laissé seul dans la bataille.
Laissé dans l’obscurité,
guidé seulement par de faibles éclats de ma foi.
Je suis tombé.
Je me suis heurté à des murs de dureté.
Mais j’ai continué.

Je me souviens encore de toi me racontant tes rêves.
Et moi, m’excitant pour toi comme si c’étaient les miens.
Je me souviens des nuits où j’ai prié pour qu’un jour
je puisse te voir vivre ces rêves.
Mais quand je te demande de prier pour moi,
tu dis que tu t’en fiches. »

Un silence.
« Tu peux y aller maintenant.
Prends soin de toi. »

Et en libérant la douleur de la prison de ma poitrine,
je me suis senti un peu plus léger.
En attendant la prochaine fois
où je libérerai encore d’autres douleurs de leur cage.
        </div>
        <div id="raw-en-text" style="display: none;">
            
            I wish I were special. I wish I were more than what I am.
            Staring into the locked bathroom mirror, I whispered that to myself.
            There are moments when I try to look at my face with eyes that aren’t mine, hoping maybe then, just maybe, I’ll understand how others see me.
            Because no matter how long I stare, I can never truly grasp the whole image of myself. My body, my presence—it’s a blur to me. I’ve never really seen me.
            I always wonder… when they look at me, do they catch the delicate, beautiful things I overlook, just as I often notice those hidden things in them?
            Can they read my quiet expressions, the ones I don’t even understand myself?
            It’s strange how I can feel the emotions buried deep inside others, even when they try so hard to hide them…
            But when it comes to me, all I see are dim, shapeless shadows.
            Sometimes, I just wish I could step out of myself.
            To live in another body for a day.
            To sit across from me.
            To talk to me.
            To see me.
            To know what it feels like to exist in this skin, from the outside.
            Because no matter how hard I try, I can’t accept the compliments.
            I nod, I smile… but deep down, I don’t believe them. Not until I truly see myself.
            Not until I can gaze into my own eyes the way I gaze into the eyes of someone I love.
            My imagination, my emotions, my sensitivity—they expand every day, endlessly.
            And the more they grow, the more lost I become within myself.
            Life feels too short. I’m still trying to understand who I am, let alone trying to understand everyone else.
            What truly hurts is how deeply I feel misunderstood.
            Even by myself.
            I misread my own intentions. I blame myself.
            Punish myself.
            Get angry at myself.
            My inner world grows larger, while the space between me and others grows wider too.
            Sometimes, it feels like I’m floating away.
            So when someone finally sees me, truly sees me, I feel really excited and happy.
            I cling to them like they’re the only light I’ve got.
            But they’re always fragile, like a light bulb made of glass.
            And I grip too hard.
            And when I do, I break them.
            The light goes out.
            The glass shatters.
            And as it breaks, it cuts into me. Makes me bleed.
            Leaves scars that never fade.
            Scars that stay.
            Scars that remind me.
            Scars I can’t forget.
            But that never stopped me from loving.
            Even if love doesn’t seem to be written in my fate, I’ve always tried to give it.
            Planting hearts like seeds in the garden of my soul, day after day.
            Yet lately, they don’t seem to grow. I hardly see any heart-shaped blooms anymore.
            Then it hit me: maybe it’s because I kept picking them.
            I’d offer them as gifts to the ones I cherished, or maybe as proof that I am someone worthy of being loved. Someone with feelings that run deep and true.
            But most flowers, as we know, end up in jars where their colors slowly fade, or pressed between the forgotten pages of an old book.
            Just like the words of the one who gave them, left unread.
            And so, I found myself with an empty garden, an empty heart, and the scent of love carried off by the wind.
            There for just a moment before disappearing again.
            But… is that how it’s meant to be?
            Maybe not.
            Maybe instead of plucking my love and handing it away too soon, I’ll let it bloom for me.
            I’ll tend to it gently, keep it alive within me—until the day someone comes along who sees its worth.
            Someone who won’t just take a flower and leave, but who will kneel beside me and help me grow them.
            Until together, we’ve planted a field that never ends.
            ⸻
            When I finally met the pain,
            I had him between my hands.
            He said :
            "I’m sorry… I know I hurt you so much.
            I know I only thought about myself, without caring about you.
            I know I said bad things about you… and acted like I was the victim.”
            I interrupted, my voice calm:
            “Shhh… don’t be afraid.
            I’m not going to hurt you.
            It’s okay.
            I won’t do any harm to you.
            I won’t expose your secrets, not even after all of that.
            You chose my heart as a secret vault for your words.
            And I won’t let you down, even when you did.”
            “But… why?
            How can you be so cool about it?!”
            “I never said I was cool.
            Even though you’re out of my life,
            after leaving a big scar on my chest that runs deep into my heart…
            Even though the words that broke me came from the one
            who was supposed to be my support and my hope.
            Even though you threw me away
            like a big chunk of nothing
            when I thought you were a permanent, valuable part of my life…
            I still sometimes hope you’re okay.
            Because one day, you were someone really close to me.
            A new member of a family I always wished I had.
            You once laughed with me.
            Shared food with me.
            Lived some beautiful moments with me.
            I didn’t care much about the bitter moments we had,
            because I always believed something good would come out of them.
            I learned to hold on to the ones who matter to me,
            even in the worst conditions.
            But me?
            I was left.
            Over the most trivial fights.
            Left alone in the battle.
            Left in the darkness,
            guided only by faint glimpses of my faith.
            I fell.
            Bumped into walls of hardness.
            But I kept going.
            I still remember you telling me your dreams.
            And me getting excited for you like they were my own.
            I remember the nights I prayed that one day
            I could watch you live those dreams.
            But when I ask you to pray for me,
            you say you don’t care.”
            A pause.
            “You can go now.
            Take care of yourself.”
            And as I freed the pain from the prison of my chest,
            I felt a little bit lighter.
            Waiting for the next time
            I’ll set more pains free from their cage.
        </div>
        <div class="fixed top-0 left-0 right-0 flex flex-col items-start p-4 space-y-2 z-50">
             <div class="flex justify-center space-x-4 mb-2">
                 <button
                    id="ar-button"
                    onclick="changeLanguage('ar')"
                    class="px-6 py-2 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none glass-button-base jello-button"
                >
                    العربية
                </button>
                <button
                    id="fr-button"
                    onclick="changeLanguage('fr')"
                    class="px-6 py-2 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none glass-button-base jello-button"
                >
                    Français
                </button>
                <button
                    id="en-button"
                    onclick="changeLanguage('en')"
                    class="px-6 py-2 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none glass-button-base jello-button"
                >
                    English
                </button>
             </div>
             <button
                 id="back-home-button"
                 onclick="window.location.href='https://dodch.github.io/Dodch-Stories-/index.html'"
                 class="w-10 h-10 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none glass-button-base back-home-button-custom inline-flex items-center justify-center jello-button" >
                ⌂
            </button>
        </div>
        <div id="content" class="rounded-lg mx-auto content-fading">
            <h1 id="title" class="text-3xl font-bold mb-4"></h1>
            <div id="text" class="text-lg leading-relaxed"></div>
        </div>
        <button
            id="save-progress-button"
            onclick="scrollToSavedWord()"
            class="fixed bottom-4 left-4 px-6 py-2 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none glass-button-base save-button-custom jello-button"
            style="z-index: 60;"
        >
            Saved Progress
        </button>
        <div id="popup" class="hidden fixed inset-0 flex items-center justify-center z-50">
            <div class="glass-button-base glass-popup shadow-lg w-64 fade-in">
                <h2 id="popup-title" class="text-lg font-bold mb-2">Save Position</h2>
                <p id="popup-text" class="mb-4 text-sm"></p>
                <div class="flex justify-end space-x-2">
                    <button
                        onclick="savePosition()"
                        class="glass-button-base jello-button bg-green-500 text-white px-4 py-2 rounded-full focus:outline-none"
                    >
                        Save
                    </button>
                    <button
                        onclick="closePopup()"
                        class="glass-button-base jello-button bg-red-500 text-white px-4 py-2 rounded-full focus:outline-none"
                    >
                        Exit
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const loadingScreen = document.getElementById("loading-screen");
        const loadPercentageText = document.querySelector(".loading-percentage");
        const body = document.body;
        let currentLanguage = 'en';
        let allSavedProgress = {};
        let tempSavedWordId = '';
        let tempSavedWordText = '';
        let highlightedWordElement = null;
        let isDarkMode = false;
        const contentMap = {
            ar: {
                title: 'ظائع لِأُوجد',
                rawTextId: 'raw-ar-text',
                saveProgress: 'التقدم المحفوظ',
                savePosition: 'التقدم المحفوظ',
                save: 'حفظ',
                exit: 'خروج',
                atWord: 'كلمة',
                positionSaved: 'الموقع محفوظ',
                forWord: 'لكلمة',
                wordNotFound: 'الكلمة المحفوظة لم يتم العثور عليها في النص الحالي.',
                noWordSaved: 'لم يتم حفظ أي كلمة لهذه اللغة بعد',
                backHome: 'العودة للصفحة الرئيسية'
            },
            fr: {
                title: 'Perdu à trouver ',
                rawTextId: 'raw-fr-text',
                saveProgress: 'Progression enregistrée',
                savePosition: 'Progression enregistrée',
                save: 'Enregistrer',
                exit: 'Sortir',
                atWord: 'mot',
                positionSaved: 'La position est enregistrée',
                forWord: 'pour le mot',
                wordNotFound: 'Le mot enregistré n\'a pas été trouvé dans le texte actuel.',
                noWordSaved: 'Aucun mot n\'a été enregistré pour cette langue encore',
                backHome: 'Retour à l\'accueil'
            },
            en: {
                title: 'lost to be found',
                rawTextId: 'raw-en-text',
                saveProgress: 'Saved Progress',
                savePosition: 'Save Position',
                save: 'Save',
                exit: 'Exit',
                atWord: 'word',
                positionSaved: 'Position saved',
                forWord: 'for the word',
                wordNotFound: 'Saved word not found in current text.',
                noWordSaved: 'No word has been saved for this language yet',
                backHome: 'Back Home'
            },
        };
        const lightBackgroundDiv = document.querySelector('.fixed-background.light-background');
        const darkBackgroundDiv = document.querySelector('.fixed-background.dark-background');
        const contentDiv = document.getElementById('content');
        const textElement = document.getElementById('text');
        const titleElement = document.getElementById('title');
        const backHomeButton = document.getElementById('back-home-button');
        const backHomeTextSpan = document.getElementById('back-home-text');
        const languageButtons = document.querySelectorAll('#ar-button, #fr-button, #en-button');
        const saveButton = document.getElementById('save-progress-button');
        const popupDivInner = document.getElementById('popup').querySelector('div');
        
        function applyTextEffects() {
            const textSpans = textElement.querySelectorAll('span[id^="word-p"]');
            const isDarkModeActive = document.body.classList.contains('dark-mode');
            textSpans.forEach(span => {
                 if (!span.classList.contains('glow-word')) {
                     if (isDarkModeActive) {
                         span.style.textShadow = '0 0 1px rgba(255, 255, 255, 0.5)';
                         span.style.webkitTextStroke = 'none';
                         span.style.textStroke = 'none';
                         span.style.webkitTextFillColor = 'white';
                         span.style.color = 'white';
                     } else {
                         span.style.textShadow = '0 0 1px rgba(0, 0, 0, 0.5)';
                         span.style.webkitTextStroke = 'none';
                         span.style.textStroke = 'none';
                         span.style.webkitTextFillColor = 'initial';
                         span.style.color = 'inherit';
                     }
                 }
             });
        }
        function clearSavedProgress() {
             delete allSavedProgress[currentLanguage];
             localStorage.setItem('allSavedProgress', JSON.stringify(allSavedProgress));
             if (highlightedWordElement) {
                highlightedWordElement.classList.remove('bg-yellow-200', 'bg-yellow-600', 'rounded', 'glow-word');
                applyTextEffects();
                highlightedWordElement = null;
             }
             console.log(`Saved progress for ${currentLanguage.toUpperCase()} cleared.`);
        }
        function changeLanguage(lang, fromLoad = false) {
            if (contentDiv.classList.contains('content-fading') && !fromLoad) {
                 return;
            }
            if (currentLanguage === lang && !fromLoad) {
                 return;
            }
            // First, reset all buttons to unselected state
            languageButtons.forEach(button => {
                button.classList.add('unselected-language');
                button.classList.remove('selected-language');
                // Set the text color for unselected buttons
                button.style.color = body.classList.contains('dark-mode') ? 'var(--unselected-lang-text-dark)' : 'var(--unselected-lang-text-light)';
            });
            // Then, apply selected state to the new button
            const newButton = document.getElementById(`${lang}-button`);
            if(newButton) {
                newButton.classList.remove('unselected-language');
                newButton.classList.add('selected-language');
                 // Set the text color for the newly selected button
                newButton.style.color = body.classList.contains('dark-mode') ? 'var(--save-button-text-dark)' : 'var(--save-button-text-light)';
            }
            currentLanguage = lang;
            if (!fromLoad) {
                 localStorage.setItem('preferredLanguage', lang);
            }
            const content = contentMap[lang];
            contentDiv.classList.add('content-fading');
            const rawTextElement = document.getElementById(content.rawTextId);
            const rawText = rawTextElement ? rawTextElement.textContent.trim() : '';
            setTimeout(() => {
                titleElement.textContent = content.title;
                if (backHomeTextSpan) {
                     backHomeTextSpan.textContent = content.backHome;
                }
                if (lang === 'ar') {
                    contentDiv.dir = 'rtl';
                    textElement.style.textAlign = 'right';
                } else {
                    contentDiv.dir = 'ltr';
                    textElement.style.textAlign = 'left';
                }
                textElement.innerHTML = '';
                if (rawText) {
                    const paragraphs = rawText.split('\n'); // Fixed line break
                    paragraphs.forEach((paragraph, pIndex) => {
                         const lines = paragraph.split('\n'); // Fixed line break
                         lines.forEach((line, lIndex) => {
                             const trimmedLine = line.trim();
                             if (trimmedLine === '') {
                                  const br = document.createElement('br');
                                  textElement.appendChild(br);
                             } else {
                                 const pElement = document.createElement('p');
                                 pElement.classList.add('mb-4', 'text-lg', 'leading-relaxed');
                                 const wordsAndSpaces = trimmedLine.match(/\S+|\s+|[.,!?;:]/g);
                                 if (wordsAndSpaces) {
                                     wordsAndSpaces.forEach((part, partIndex) => {
                                         if (part.trim() === '' && !/[.,!?;:]/.test(part)) {
                                             pElement.appendChild(document.createTextNode(part));
                                         } else {
                                             const span = document.createElement('span');
                                             span.textContent = part;
                                             span.classList.add('cursor-pointer');
                                             const uniqueId = `word-p${pIndex}-l${lIndex}-part${partIndex}`;
                                             span.id = uniqueId;
                                             span.onclick = () => handleWordClick(uniqueId, span.textContent.trim());
                                             pElement.appendChild(span);
                                         }
                                     });
                                 }
                                 textElement.appendChild(pElement);
                             }
                         });
                    });
                } else {
                     const noTextElement = document.createElement('p');
                     noTextElement.classList.add('text-center', 'text-xl', 'text-gray-500');
                     noTextElement.textContent = `No text available for ${lang.toUpperCase()}. Please add content to the raw text div.`;
                     textElement.appendChild(noTextElement);
                     console.warn(`No raw text found for language: ${lang}`);
                }
                document.getElementById('save-progress-button').textContent = content.saveProgress;
                document.getElementById('popup-title').textContent = content.savePosition;
                document.getElementById('popup').querySelector('.bg-green-500').textContent = content.save;
                document.getElementById('popup').querySelector('.bg-red-500').textContent = content.exit;
                highlightWord();
                applyTextEffects();
                // --- FIX: Only scroll if it's the initial load ---
                const savedProgressForCurrentLang = allSavedProgress[currentLanguage];
                if (fromLoad && savedProgressForCurrentLang && savedProgressForCurrentLang.id) {
                      // Introduce a small delay to ensure content is fully rendered before scrolling
                      setTimeout(() => {
                          scrollToSavedWord(false); // Perform scroll without checks
                      }, 100);
                }
                // --- END FIX ---
                contentDiv.classList.remove('content-fading');
                if (isDarkMode) {
                    titleElement.style.color = 'white';
                } else {
                     titleElement.style.color = 'inherit';
                }
            }, 500);
        }
        function handleWordClick(spanId, wordText) {
            tempSavedWordId = spanId;
            tempSavedWordText = wordText;
            document.getElementById('popup-text').textContent = `${contentMap[currentLanguage].savePosition} ${contentMap[currentLanguage].atWord}: "${wordText}"?`;
            document.getElementById('popup').classList.remove('hidden');
            document.getElementById('popup').classList.remove('fade-out');
            document.getElementById('popup').classList.add('fade-in');
        }
        function closePopup() {
            document.getElementById('popup').classList.remove('fade-in');
            document.getElementById('popup').classList.add('fade-out');
            tempSavedWordId = '';
            tempSavedWordText = '';
            setTimeout(() => {
                document.getElementById('popup').classList.add('hidden');
            }, 300);
        }
        function savePosition() {
            if (tempSavedWordId) {
                allSavedProgress[currentLanguage] = {
                    id: tempSavedWordId,
                    text: tempSavedWordText
                };
                console.log(`${contentMap[currentLanguage].positionSaved} ${contentMap[currentLanguage].forWord}: "${tempSavedWordText}" (ID: ${tempSavedWordId}) in language "${currentLanguage}"`);
                localStorage.setItem('allSavedProgress', JSON.stringify(allSavedProgress));
                highlightWord();
            }
            closePopup();
        }
        function scrollToSavedWord(performChecks = true) {
            const savedProgressForCurrentLang = allSavedProgress[currentLanguage];
            if (!savedProgressForCurrentLang || !savedProgressForCurrentLang.id) {
                alert(contentMap[currentLanguage].noWordSaved);
                return;
            }
            const savedWordId = savedProgressForCurrentLang.id;
            const savedWordText = savedProgressForCurrentLang.text;
            const targetElement = document.getElementById(savedWordId);
            if (targetElement) {
                 highlightWord();
                 requestAnimationFrame(() => {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 });
            } else {
                console.warn(`${contentMap[currentLanguage].wordNotFound} (ID: ${savedWordId}, Text: "${savedWordText}")`);
                if (performChecks) {
                    alert(`${contentMap[currentLanguage].wordNotFound} ("${savedWordText}")`);
                    const confirmClear = confirm(`Clear saved progress for ${currentLanguage.toUpperCase()}?`);
                    if (confirmClear) {
                        clearSavedProgress();
                    }
                } else {
                     console.warn(`Clearing saved progress for ${currentLanguage.toUpperCase()} due to missing element.`);
                     clearSavedProgress();
                }
            }
        }
       function highlightWord() {
           if (highlightedWordElement) {
               highlightedWordElement.classList.remove('bg-yellow-200', 'bg-yellow-600', 'rounded', 'glow-word');
               applyTextEffects();
               highlightedWordElement = null;
           }
           const savedProgressForCurrentLang = allSavedProgress[currentLanguage];
           if (!savedProgressForCurrentLang || !savedProgressForCurrentLang.id) {
               return;
           }
           const savedWordId = savedProgressForCurrentLang.id;
           const targetElement = document.getElementById(savedWordId);
           if (targetElement) {
               highlightedWordElement = targetElement;
               highlightedWordElement.classList.add('rounded', 'glow-word');
               if (document.body.classList.contains('dark-mode')) {
                   highlightedWordElement.classList.remove('bg-yellow-200');
                   highlightedWordElement.classList.add('bg-yellow-600');
               } else {
                   highlightedWordElement.classList.remove('bg-yellow-600');
                   highlightedWordElement.classList.add('bg-yellow-200');
               }
               highlightedWordElement.style.textShadow = 'none';
               highlightedWordElement.style.webkitTextStroke = 'none';
               highlightedWordElement.style.textStroke = 'none';
               highlightedWordElement.style.webkitTextFillColor = 'initial';
               highlightedWordElement.style.color = 'initial';
           } else {
               console.warn(`Element for saved word ID "${savedWordId}" not found for highlighting in language "${currentLanguage}".`);
           }
       }
        function handleDarkModeChange(mediaQuery) {
            isDarkMode = mediaQuery.matches;
            if (isDarkMode) {
                body.classList.add('dark-mode');
                lightBackgroundDiv.style.opacity = 0;
                darkBackgroundDiv.style.opacity = 1;
            } else {
                body.classList.remove('dark-mode');
                lightBackgroundDiv.style.opacity = 1;
                darkBackgroundDiv.style.opacity = 0;
            }
            changeLanguage(currentLanguage, false);
            applyTextEffects();
            highlightWord();
        }
        const animatedButtons = document.querySelectorAll('button:not(#popup button)');
        animatedButtons.forEach(button => {
            button.addEventListener('click', function() {
                 if (this.id !== 'back-home-button') {
                    this.classList.add('tapped');
                    setTimeout(() => {
                        this.classList.remove('tapped');
                    }, 100);
                 }
            });
        });
        let load = 0;
        let interval = setInterval(updateLoadingText, 30);
        function updateLoadingText() {
          load++;
          if (load > 99) {
            clearInterval(interval);
            loadPercentageText.innerText = '100%';
          } else {
            loadPercentageText.innerText = `${load}%`;
          }
        }
        window.addEventListener('load', () => {
             if (load < 100) {
                 loadPercentageText.innerText = '100%';
             }
            setTimeout(() => {
                body.classList.remove('loading');
                loadingScreen.classList.add('hidden');
                setTimeout(() => {
                    loadingScreen.remove();
                 }, 600);
            }, 500);
        });
        document.addEventListener('DOMContentLoaded', () => {
             const savedProgressJson = localStorage.getItem('allSavedProgress');
             try {
                 allSavedProgress = JSON.parse(savedProgressJson) || {};
             } catch (e) {
                 console.error("Failed to parse saved progress from localStorage:", e);
                 allSavedProgress = {};
                 localStorage.removeItem('allSavedProgress');
             }

             // Initialize dark mode based on system preference
             const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
             handleDarkModeChange(darkModeMediaQuery);

             // Listen for changes in system dark mode preference
             darkModeMediaQuery.addListener(handleDarkModeChange);

             const preferredLanguage = localStorage.getItem('preferredLanguage');
             let initialLangToLoad = 'en';
             if (preferredLanguage && contentMap[preferredLanguage]) {
                initialLangToLoad = preferredLanguage;
             }
             // Load the initial language content and scroll to saved word if applicable
             changeLanguage(initialLangToLoad, true);
        });
    </script>
</body>
</html>
